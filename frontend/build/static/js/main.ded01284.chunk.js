(this["webpackJsonpweave-code"]=this["webpackJsonpweave-code"]||[]).push([[0],{29:function(e,t,a){},39:function(e,t,a){e.exports=a(86)},41:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=(a(41),a(11)),c=a.n(o),s=a(10),l=a(4),i=a(1);a(45);function m(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],m=s[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],g=f[1],d=""!==h?r.a.createElement(u,{message:h}):null;return r.a.createElement("div",null,r.a.createElement("h1",{className:"login-page-title"},"Join the conversation"),r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:"./img/weave-icon.svg",className:"login-icon",alt:""}),r.a.createElement("form",{className:"login-form"},r.a.createElement("label",{className:"login-form-label"},"username/email"),r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value),g("")},className:"login-form-input"}),r.a.createElement("label",{className:"login-form-label"},"password"),r.a.createElement("input",{value:l,onChange:function(e){m(e.target.value),g("")},type:"password",className:"login-form-input"}),r.a.createElement("button",{type:"submit",className:"login-submit-btn",onClick:function(e){return function(e){if(e.preventDefault(),function(e){var t=e.loginName,a=e.password,n=e.updateErrorMessage;if(""===t)n("Please enter your username or email.");else{if(""!==a)return!0;n("Please enter your password.")}return!1}({loginName:a,password:l,updateErrorMessage:g})){var t={username:a,password:l};fetch("http://weave.projectcarbon.io/server/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message)g(e.error_message);else{var t=e.access_token,a=e.refresh_token,n=e.username;console.log(t),localStorage.setItem("data",e),localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",a),window.location="profile/"+n}})).catch((function(e){console.error(e),alert("error: check console for details")}))}}(e)}},"login")),d,r.a.createElement("a",{href:"register",className:"login-link"},"create an account"),r.a.createElement("a",{href:"profile/newuser2",className:"login-link"},"forgot password")))}function u(e){var t=e.message;return r.a.createElement("div",{className:"login-error-bubble"},r.a.createElement("p",{className:"login-error-message"},t))}a(46);function p(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),h=p[0],g=p[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),E=b[0],v=b[1],j=Object(n.useState)(""),N=Object(i.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(""),y=Object(i.a)(S,2),k=y[0],C=y[1],_=Object(n.useState)(!1),T=Object(i.a)(_,2),P=T[0],x=T[1],I=Object(n.useState)(""),B=Object(i.a)(I,2),A=B[0],z=B[1],M=""!==A?r.a.createElement(f,{message:A}):null;return r.a.createElement("div",null,r.a.createElement("h1",{className:"register-page-title"},"Join the conversation"),r.a.createElement("div",{className:"register-container"},r.a.createElement("img",{src:"./img/weave-icon.svg",className:"register-icon",alt:""}),r.a.createElement("form",{className:"register-form"},r.a.createElement("label",{className:"register-form-label"},"Username"),r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value),z("")},className:"register-form-input"}),r.a.createElement("label",{className:"register-form-label"},"First Name"),r.a.createElement("input",{value:l,onChange:function(e){m(e.target.value),z("")},className:"register-form-input"}),r.a.createElement("label",{className:"register-form-label"},"Last Name"),r.a.createElement("input",{value:h,onChange:function(e){g(e.target.value),z("")},className:"register-form-input"}),r.a.createElement("label",{className:"register-form-label"},"Email"),r.a.createElement("input",{value:E,onChange:function(e){v(e.target.value),z("")},className:"register-form-input"}),r.a.createElement("label",{className:"register-form-label"},"Password"),r.a.createElement("input",{value:O,onChange:function(e){w(e.target.value),z("")},type:"password",className:"register-form-input"}),r.a.createElement("label",{className:"register-form-label"},"Confirm Password"),r.a.createElement("input",{value:k,onChange:function(e){C(e.target.value),z("")},type:"password",className:"register-form-input"}),r.a.createElement("input",{className:"register-checkbox",type:"checkbox",checked:P,onChange:function(e){x(!P),z("")}}),r.a.createElement("label",{className:"register-checkbox-label"},"I am 13 years old or older"),r.a.createElement("button",{type:"submit",className:"register-submit-btn",onClick:function(e){return function(e){if(e.preventDefault(),function(e){var t=e.loginName,a=e.firstName,n=e.lastName,r=e.password,o=e.confirmPassword,c=e.isOverThirteen,s=e.email,l=e.updateErrorMessage;if(""===t)l("Please enter a username.");else if(""===a)l("Please enter your first name.");else if(""===n)l("Please enter your last name.");else if(""===s)l("Please enter your email.");else if(""===r)l("Please enter a password.");else if(r!==o)l("The passwords do not match.");else if(r.length<6)l("Password should be 6 character minimum.");else{if(c)return!0;l("You must be 13 or older to join Weave.")}return!1}({loginName:a,firstName:l,lastName:h,password:O,confirmPassword:k,email:E,isOverThirteen:P,updateErrorMessage:z})){var t={username:a,firstName:l,lastName:h,password:O,email:E};fetch("http://weave.projectcarbon.io/server/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message)z(e.error_message);else{var t=e.access_token,n=e.refresh_token;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",n),window.location="profile/"+a}})).catch((function(e){console.error(e),alert("error: check console for details")}))}}(e)}},"create account")),M,r.a.createElement("a",{href:"login",className:"register-link"},"existing user login")))}function f(e){var t=e.message;return r.a.createElement("div",{className:"register-error-bubble"},r.a.createElement("p",{className:"register-error-message"},t))}a(47);var h=a(88),g=a(89);a(48);function d(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)("profiles"),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),f=p[0],d=p[1],E=""!==f?r.a.createElement(b,{message:f}):null;return r.a.createElement("div",null,r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossOrigin:"anonymous"}),r.a.createElement(h.a,{expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(h.a.Brand,{href:"/timeline"},r.a.createElement("img",{src:"/img/weave-icon.svg",width:"50",height:"50",className:"d-inline-block align-top",alt:""})),r.a.createElement(g.a,{className:"mr-auto"},r.a.createElement(g.a.Link,null,"Messages"),r.a.createElement(g.a.Link,null,"Notifications"),r.a.createElement(g.a.Link,null,"Help"),r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value)}}),r.a.createElement("select",{id:"type",onChange:function(e){m(e.target.value)}},r.a.createElement("option",{value:"profiles"},"profiles"),r.a.createElement("option",{value:"topics"},"topics")),r.a.createElement("button",{onClick:function(e){return function(){d("");var e={search_string:a,search_type:l};fetch("http://weave.projectcarbon.io/server/search/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error_message||e.msg;e.error_message?d("No Results."):window.location="profiles"==l?"/profile/"+a:"/topic/"+a})).catch((function(e){console.error(e)}))}()}},"Search"),E)))}function b(e){var t=e.message;return r.a.createElement("div",{className:"comment-error-bubble"},r.a.createElement("p",{className:"comment-error-message"},t))}a(54);function E(){var e=r.a.useState(-180),t=Object(i.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){o(0)}),[]);return r.a.createElement("div",{className:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar",style:{transform:"translatex(".concat(a,"px)")}},r.a.createElement("button",{onClick:function(){o(a<0?0:-180)},className:"profile-toggle-menu",style:{transform:"translate(".concat(180,"px, 20vh)")}}),r.a.createElement("div",{className:"side-bar-menu"},r.a.createElement("h1",{className:"side-bar-heading"},"Explore your web:"),r.a.createElement("a",{href:"/timeline",className:"side-bar-selection"},"Your timeline")," ",r.a.createElement("br",null),r.a.createElement("a",{href:"/profile/",className:"side-bar-selection"},"Profile")," ",r.a.createElement("br",null),r.a.createElement("a",{href:"/createpost",className:"side-bar-selection"},"Create a post")," ",r.a.createElement("br",null),r.a.createElement("a",{href:"/savedposts",className:"side-bar-selection"},"Saved posts")," ",r.a.createElement("br",null),r.a.createElement("a",{href:"/settings",className:"side-bar-selection"},"Settings")," ",r.a.createElement("br",null),r.a.createElement("button",{className:"side-bar-logout",onClick:function(e){return function(){var e=localStorage.getItem("access_token");fetch("http://weave.projectcarbon.io/server/logout",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return e.json()})).then((function(e){var t=e.refresh_token;fetch("http://weave.projectcarbon.io/server/logout2",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){localStorage.clear("access_token"),localStorage.clear("refresh_token"),window.location="../"})).catch((function(e){console.error(e),alert("error: check console for details")}))})).catch((function(e){console.error(e),alert("error: check console for details")}))}()}},"Logout"))))}var v=a(35),j=a.n(v);a(67);function N(e){var t=e.postId,a=e.userName,o=(e.redesign,e.isMinimized),c=Object(n.useState)(""),s=Object(i.a)(c,2),l=(s[0],s[1]),m=Object(n.useState)([]),u=Object(i.a)(m,2),p=u[0],f=u[1],h=Object(n.useState)(0),g=Object(i.a)(h,2),d=g[0],b=g[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),N=v[0],w=v[1],y=Object(n.useState)(0),k=Object(i.a)(y,2),C=k[0],_=k[1],T=localStorage.getItem("access_token");T||(T="");var P="http://weave.projectcarbon.io/server/post/"+t;Object(n.useEffect)((function(){fetch(P,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T}}).then((function(e){return e.json()})).then((function(e){e.error_message&&(l(e.error_message),window.location="/404"),f(e);var t=e.score;_(t)})).catch((function(e){console.error(e)}));var e={username:a,post_id:t};fetch("http://weave.projectcarbon.io/server/poststates/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error_message&&(l(e.error_message),window.location="/404");var t=e.saved,a=e.voted;b(t),w(a)})).catch((function(e){console.error(e),alert(e)})),w(p.score)}),[]);var x=p.topic_name,I=(p.date_created,p.post_type,p.pic_path),B=p.title,A=p.content,z=p.creator;p.score;return function(e){e.isUpvoted,e.isDownVoted;var t=e.score,a=e.title,n=e.text,o=e.author,c=e.isSaved,s=e.savePost,l=e.voteCheck,i=e.vote,m=e.isMinimized,u=e.postId,p=e.src,f=e.topic_name,h=1==c?"red":"rgba(225, 225, 225, 1)",g=1==l,d=-1==l,b=m?"post-component-container post-component-container-collapsed":"post-component-container";return r.a.createElement("div",{className:b},r.a.createElement(O,{isUpvoted:g,isDownVoted:d,score:t,upvoteClick:function(){i(1)},downvoteClick:function(){i(-1)}}),r.a.createElement(S,{className:"post-component-bookmark",fill:h,onClick:function(){return console.log(c),void s(-1==c?1:-1)}}),r.a.createElement("p",{className:"post-component-topic"},r.a.createElement("a",{href:"/topic/"+f}," w/",f)),r.a.createElement("div",{className:"post-component-content",onClick:function(){m&&(window.location.href="/post/"+u)}},r.a.createElement("p",{className:"post-component-author"},r.a.createElement("a",{href:"/profile/"+o}," @",o)),r.a.createElement("h2",{className:"post-component-title"},a),r.a.createElement("img",{src:p,className:"post-component-image"}),r.a.createElement(j.a,null,r.a.createElement("p",{className:"post-component-content-text"},n))))}({author:z,title:B,text:A,topic_name:x,score:C,isSaved:d,savePost:function(e){b(e);var n={username:a,post:t,type:e};fetch("http://weave.projectcarbon.io/server/save/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.error_message&&(l(e.error_message),window.location="/404"),e.msg&&(window.location="/login")})).catch((function(e){console.error(e)}))},voteCheck:N,vote:function(e){w(e);var n={username:a,type:"1",id:t,vote:e};fetch("http://weave.projectcarbon.io/server/vote/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.score,a=e.voteState;_(t),w(a)})).catch((function(e){console.error(e)}))},isMinimized:o,postId:t,src:I})}function O(e){var t=e.score,a=e.isUpvoted,n=e.isDownVoted,o=e.upvoteClick,c=e.downvoteClick,s=a?"#A866B9":"#9C9C9C",l=n?"#A866B9":"#9C9C9C";return r.a.createElement("div",{className:"post-component-vertical-vote-bar"},r.a.createElement("div",{className:"post-component-vertical-vote-container"},r.a.createElement(w,{fill:s,className:"post-component-vote-arrow-upvote",onClick:function(){o()}}),r.a.createElement("p",{className:"post-component-score"},t),r.a.createElement(w,{fill:l,className:"post-component-vote-arrow-downvote",onClick:function(){c()}})))}function w(e){var t=e.fill,a=e.className,n=e.onClick;return r.a.createElement("svg",{width:"24",height:"14",viewBox:"0 0 24 14",xmlns:"http://www.w3.org/2000/svg",className:a,onClick:function(){return n()}},r.a.createElement("path",{d:"M10.9393 13.0607C11.5251 13.6464 12.4749 13.6464 13.0607 13.0607L22.6066 3.51472C23.1924 2.92893 23.1924 1.97919 22.6066 1.3934C22.0208 0.807611 21.0711 0.807611 20.4853 1.3934L12 9.87868L3.51472 1.3934C2.92893 0.807611 1.97919 0.807611 1.3934 1.3934C0.807611 1.97919 0.807611 2.92893 1.3934 3.51472L10.9393 13.0607ZM10.5 11V12H13.5V11H10.5Z",fill:t}))}function S(e){var t=e.fill,a=e.className,n=e.onClick;return r.a.createElement("svg",{viewBox:"-58 0 404 404.54135",width:"404pt",xmlns:"http://www.w3.org/2000/svg",className:a,onClick:function(){return n()}},r.a.createElement("path",{d:"m277.527344 0h-267.257813c-5.523437 0-10 4.476562-10 10v374.527344c-.011719 7.503906 4.183594 14.378906 10.855469 17.804687 6.675781 3.429688 14.707031 2.832031 20.796875-1.550781l111.976563-80.265625 111.976562 80.269531c6.097656 4.367188 14.121094 4.960938 20.792969 1.535156 6.667969-3.425781 10.863281-10.292968 10.863281-17.792968v-374.527344c0-5.523438-4.480469-10-10.003906-10zm0 0",fill:t}))}var y=a(36),k=a.n(y);a(68);function C(e){var t=e.commentId,a=e.userName,o=Object(n.useState)(""),c=Object(i.a)(o,2),s=(c[0],c[1]),l=Object(n.useState)([]),m=Object(i.a)(l,2),u=m[0],p=m[1],f=Object(n.useState)(0),h=Object(i.a)(f,2),g=h[0],d=h[1],b=Object(n.useState)(0),E=Object(i.a)(b,2),v=E[0],j=E[1],N=localStorage.getItem("access_token");N||(N="");var O="http://weave.projectcarbon.io/server/comment/"+t;Object(n.useEffect)((function(){fetch(O,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N}}).then((function(e){return e.json()})).then((function(e){e.error_message&&(s(e.error_message),window.location="/404"),p(e);var t=e.score;j(t)})).catch((function(e){console.error(e)}));var e={username:a,comment_id:t};fetch("http://weave.projectcarbon.io/server/commentstates/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error_message&&(s(e.error_message),window.location="/404");var t=e.voted;d(t)})).catch((function(e){console.error(e),alert(e)}))}),[]);var w=u.date_created,S=u.content,y=u.user_parent,C=function(e){d(e);var n={username:a,type:"2",id:t,vote:e};fetch("http://weave.projectcarbon.io/server/vote/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.score,a=e.voteState;j(t),d(a)})).catch((function(e){console.error(e)}))},_="/profile/"+y;return r.a.createElement("div",null,r.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),r.a.createElement(k.a,{className:"comment-content-header",openedClassName:"comment-content-header-open",triggerClassName:"comment-trigger",triggerOpenedClassName:"comment-trigger-open",trigger:y},r.a.createElement("div",{className:"comment-content-container"},r.a.createElement("div",{className:"comment-vote-container"},g>0?r.a.createElement("i",{class:"fa fa-arrow-circle-up",style:{fontSize:"36px",color:"red"},onClick:function(){return C(1)}}):r.a.createElement("i",{class:"fa fa-arrow-circle-up",style:{fontSize:"36px"},onClick:function(){return C(1)}}),r.a.createElement("p",{className:"post-vote-score"},v),g<0?r.a.createElement("i",{class:"fa fa-arrow-circle-down",style:{fontSize:"36px",color:"red"},onClick:function(){return C(-1)}}):r.a.createElement("i",{class:"fa fa-arrow-circle-down",style:{fontSize:"36px"},onClick:function(){return C(-1)}})),r.a.createElement("div",{className:"comment-text-container"},r.a.createElement("p",{className:"comment-text"},r.a.createElement("a",{href:_},y)),r.a.createElement("p",{className:"comment-text"},w),r.a.createElement("p",{className:"comment-content"},S)))))}function _(e){var t=e.username,a=localStorage.getItem("access_token");a||(a="");var n="/profile/"+t+"/";return r.a.createElement("div",null,r.a.createElement("a",{href:n},t)," ",r.a.createElement("br",null))}var T=a(37),P=a.n(T);a(69);function x(e){var t=e.route,a=e.topic,o=e.post_id,c=e.username,s=e.elementType,l=e.reloadFlag,m=Object(n.useState)([]),u=Object(i.a)(m,2),p=u[0],f=u[1],h=Object(n.useState)([]),g=Object(i.a)(h,2),d=g[0],b=g[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),j=v[0],O=v[1],w=Object(n.useState)(0),S=Object(i.a)(w,2),y=S[0],k=S[1],T=Object(n.useState)(5),x=Object(i.a)(T,1)[0],I=localStorage.getItem("access_token");null==I&&(window.location="/login"),Object(n.useEffect)((function(){var e="http://weave.projectcarbon.io/server/"+t,n={start:j*x,end:x,topic:a,post_id:o,username:c};console.log(JSON.stringify(n)),console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.pull_list,a=e.rowCount;k(Math.ceil(a/x)),f(t),O(0)})).catch((function(e){console.log(e)}))}),[t,l]),Object(n.useEffect)((function(){var e="http://weave.projectcarbon.io/server/"+t;console.log(e);var n={start:j*x,end:x,topic:a,post_id:o,username:c};fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.pull_list,a=e.rowCount;k(Math.ceil(a/x)),f(t)})).catch((function(e){console.log(e)}))}),[j,l]),Object(n.useEffect)((function(){var e=[];p&&(p.forEach((function(t){console.log(t),"comment"==s?e.push(r.a.createElement(C,{key:t,commentId:t,userName:"schikyal"})):"profile"==s?e.push(r.a.createElement(_,{username:t})):e.push(r.a.createElement(N,{key:t,postId:t,userName:"schikyal",redesign:!0,isMinimized:!0}))})),b(e),0===d.length&&(e=r.a.createElement("p",null,"No Content Yet!")))}),[p,l]);return r.a.createElement("div",{className:"posts-display"},d,r.a.createElement(P.a,{previousLabel:"<",nextLabel:">",pageCount:y,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(e){var t=e.selected;O(t)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}))}function I(e){var t=e.followType,a=e.toFollow,o=e.initialState,c=e.className,s=e.refresh,l=Object(n.useState)(o),m=Object(i.a)(l,2),u=m[0],p=m[1],f=localStorage.getItem("access_token");f||(f=""),Object(n.useEffect)((function(){p(o)}),[o]);var h="http://weave.projectcarbon.io/server/follow"+t+"/",g=function(e){var t={following:a,type:e};fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var t=e.followState;s(),p(t)})).catch((function(e){console.error(e)}))};return r.a.createElement("div",null,0==u?r.a.createElement("button",{type:"button",className:c,onClick:function(e){return g(1)}},"Follow"):r.a.createElement("button",{type:"button",className:c,onClick:function(e){return g(-1)}},"Unfollow"))}function B(e){var t=e.toBlock,a=e.initialState,o=e.className,c=e.refresh,s=Object(n.useState)(a),l=Object(i.a)(s,2),m=l[0],u=l[1],p=localStorage.getItem("access_token");p||(p=""),Object(n.useEffect)((function(){u(a)}),[a]);var f=function(e){var a={user_blocked:t,type:e};fetch("http://weave.projectcarbon.io/server/blockuser/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){var t=e.blockState;c(),u(t)})).catch((function(e){console.error(e)}))};return r.a.createElement("div",null,0==m?r.a.createElement("button",{type:"button",className:o,onClick:function(e){return f(1)}},"Block"):r.a.createElement("button",{type:"button",className:o,onClick:function(e){return f(-1)}},"Unblock"))}function A(){var e=Object(l.f)().username,t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=(a[1],Object(n.useState)([])),s=Object(i.a)(c,2),m=s[0],u=s[1],p=Object(n.useState)(0),f=Object(i.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(e),v=Object(i.a)(b,2),j=v[0],N=(v[1],Object(n.useState)(!0)),O=Object(i.a)(N,2),w=O[0],S=O[1],y=localStorage.getItem("access_token");return y||(y=""),Object(n.useEffect)((function(){j||""===y||fetch("http://weave.projectcarbon.io/server/protected",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+y}}).then((function(e){return e.json()})).then((function(e){window.location.href="/profile/"+e.logged_in})).catch((function(e){console.error(e)}))}),[]),Object(n.useEffect)((function(){j&&(console.log(j),fetch("http://weave.projectcarbon.io/server/profile/"+j,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+y}}).then((function(e){return e.json()})).then((function(e){e.error_message||e.msg;"User does not exist"==e.error_message&&(window.location="/404"),"Blocked from content"==e.error_message&&(window.location="/blocked"),u(e)})).catch((function(e){console.error(e)})))}),[j,w]),Object(n.useEffect)((function(){}),[o]),Object(n.useEffect)((function(){}),[h]),r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"profile-container"},r.a.createElement(E,null),r.a.createElement(z,{userData:m,pageUsername:e,refresh:function(){S(!w)}}),r.a.createElement(J,{pageUsername:e,setContentView:g,contentView:h})))}function z(e){var t=e.userData,a=e.pageUsername,n=e.refresh,o=t.user_bio,c=t.user_pic,s=t.follower_count,l=t.following_count,i=t.topic_count,m=t.first_name,u=t.last_name,p=t.date_joined,f=t.username,h=t.follow,g=t.block;return r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"profile-info"},r.a.createElement(D,{user_pic:c}),r.a.createElement("h1",{className:"profile-name"},m+" "+u),r.a.createElement("p",{className:"profile-username"},a),r.a.createElement("h1",{className:"profile-bio-title"},"Bio"),r.a.createElement("p",{className:"profile-bio"},o),r.a.createElement("h1",{className:"profile-about-title"},"Joined"),r.a.createElement("p",{className:"profile-about"},p),r.a.createElement(M,{pageUsername:a,username:f,follow:h,block:g,refresh:function(){return n()}}),r.a.createElement("p",{className:"profile-followers"},s," Followers"),r.a.createElement("p",{className:"profile-following"},l," Following"),r.a.createElement("p",{className:"profile-following"},i," Topics Following")))}function M(e){var t=e.pageUsername,a=e.username,n=e.follow,o=e.block,c=e.refresh;return a===t?r.a.createElement("button",{onClick:function(){return window.location.href="/editprofile"},type:"button",className:"profile-follow-button"},"Edit Profile"):function(e){var t=e.pageUsername,a=e.follow,n=e.refresh,o=e.block;return r.a.createElement("div",null,r.a.createElement(I,{className:"profile-follow-button",followType:"user",toFollow:t,initialState:a,refresh:function(){n()}}),r.a.createElement(B,{className:"profile-follow-button",toBlock:t,initialState:o,refresh:function(){n()}}))}({pageUsername:t,follow:n,refresh:c,block:o})}function D(e){var t=e.user_pic;return null==t?r.a.createElement("img",{src:"/img/weave-icon.svg",className:"profile-icon",alt:""}):r.a.createElement("img",{src:t,className:"profile-icon",alt:""})}function J(e){var t=e.pageUsername,a=e.setContentView,o=e.contentView,c=Object(n.useState)("userposts/"),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)("post"),p=Object(i.a)(u,2),f=p[0],h=p[1];return Object(n.useEffect)((function(){1==o?(m("usercomments/"),h("comment")):(m("userposts/"),h("post"))}),[o]),r.a.createElement("div",{className:"profile-choice"},r.a.createElement("div",{className:"profile-buttons"},r.a.createElement("button",{type:"button",className:"profile-posts-button",onClick:function(e){return a(0)}},"Posts"),r.a.createElement("button",{type:"button",className:"profile-interactions-button",onClick:function(e){return a(1)}},"Interactions")),r.a.createElement("div",{className:"profile-display"},r.a.createElement(x,{route:l,username:t,elementType:f})))}var U=a(17),F=a.n(U);a(75);function L(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),f=p[0],d=p[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),v=E[0],j=E[1],N=Object(n.useState)(""),O=Object(i.a)(N,2),w=O[0],S=O[1],y=Object(n.useState)(null),k=Object(i.a)(y,2),C=k[0],_=k[1],T=Object(n.useState)(localStorage.getItem("access_token")),P=Object(i.a)(T,2),x=P[0],I=P[1];window.onload=function(e){"null"==e&&(window.location="/login")}(x);var B=function(e){if(e.preventDefault(),function(e){e.firstName,e.lastName,e.bio;if(!e.access_token)return alert("Invalid access token"),!1;return!0}({firstName:a,lastName:l,bio:f,access_token:x})){var t={firstname:a,lastname:l,biocontent:f};fetch("http://weave.projectcarbon.io/server/editprofile/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+x},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message)j(e.error_message);else{var t=e.access_token,a=e.refresh_token;S("Profile updated!"),localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",a),I(localStorage.getItem("access_token"))}})).catch((function(e){console.error(e),alert("error: check console for details")}))}if(null!==C&&C.length>0){var n=new FormData,r=C[C.length-1];n.append("image",r,r.name),fetch("http://weave.projectcarbon.io/server/editprofilepic/",{method:"POST",headers:{Authorization:"Bearer "+x},body:n}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}},A=""!==v?r.a.createElement(G,{message:v}):null,z=""!==w?r.a.createElement(Y,{message:w}):null;return r.a.createElement("div",null,r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),r.a.createElement(h.a,{expand:"lg",bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(h.a.Brand,{href:"/login"},r.a.createElement("img",{src:"/img/weave-icon.svg",width:"50",height:"50",className:"d-inline-block align-top",alt:""})),r.a.createElement(g.a,{className:"mr-auto"},r.a.createElement(g.a.Link,null,"Messages"),r.a.createElement(g.a.Link,null,"Notifications"),r.a.createElement(g.a.Link,null,"Help"))),r.a.createElement("h1",{className:"edit-page-title"},"Update Your Information"),r.a.createElement("div",{className:"edit-container"},r.a.createElement("img",{src:"./img/weave-icon.svg",className:"login-icon",alt:""}),r.a.createElement("form",{className:"edit-form"},r.a.createElement("label",{className:"edit-form-label"},"First Name"),r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value),j(""),S("")},className:"edit-form-input"}),r.a.createElement("label",{className:"edit-form-label"},"Last Name"),r.a.createElement("input",{value:l,onChange:function(e){m(e.target.value),j(""),S("")},className:"edit-form-input"}),r.a.createElement("label",{className:"edit-form-label"},"Bio"),r.a.createElement("textarea",{value:f,onChange:function(e){d(e.target.value),j(""),S("")},className:"bio-form-input"}),r.a.createElement("label",{className:"edit-form-label"},"Profile Picture"),r.a.createElement(F.a,{withIcon:!0,imgExtension:[".jpg","jpeg",".gif",".png",".gif"],maxFileSize:1e7,buttonText:"Select your profile picture.",className:"profile-pic-upload",onChange:_}),r.a.createElement("button",{type:"submit",className:"edit-update-btn",onClick:function(e){return B(e)}},"Update")),A,z,r.a.createElement("a",{href:"javascript:history.back()",className:"edit-link"},"go back")))}function G(e){var t=e.message;return r.a.createElement("div",{className:"edit-error-bubble"},r.a.createElement("p",{className:"edit-error-message"},t))}function Y(e){var t=e.message;return r.a.createElement("div",{className:"edit-success-bubble"},r.a.createElement("p",{className:"edit-error-message"},t))}a(29);function H(){return r.a.createElement("div",{className:"error-box"},r.a.createElement("img",{className:"error-image",src:"./img/weave-icon.svg"}),r.a.createElement("h2",{className:"error-code"},"404: Page Not Found"),r.a.createElement("p",{className:"error-message"},"Looks like you got tangled up, this page doesn't exist!"))}function V(){return r.a.createElement("div",{className:"error-box"},r.a.createElement("img",{className:"error-image",src:"./img/weave-icon.svg"}),r.a.createElement("h2",{className:"error-code"},"Blocked: Page Not Accessible"),r.a.createElement("p",{className:"error-message"},"A user has blocked you from viewing this content."))}a(76);function W(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),f=p[0],d=p[1],b=Object(n.useState)(0),E=Object(i.a)(b,2),v=E[0],j=E[1],N=Object(n.useState)(null),O=Object(i.a)(N,2),w=O[0],S=O[1],y=Object(n.useState)(""),k=Object(i.a)(y,2),C=k[0],_=k[1],T=Object(n.useState)(""),P=Object(i.a)(T,2),x=P[0],I=P[1],B=localStorage.getItem("access_token");window.onload=void 0,Object(n.useEffect)((function(){fetch("http://weave.projectcarbon.io/server/protected",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+B}}).then((function(e){return e.json()})).then((function(e){e.logged_in})).catch((function(e){alert("Err in console"),console.error(e)}))}),[]);var A=""!==C?r.a.createElement(R,{message:C}):null,z=""!=x?r.a.createElement(Z,{message:x}):null;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),r.a.createElement(h.a,{expand:"lg",bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(h.a.Brand,{href:"/login"},r.a.createElement("img",{src:"/img/weave-icon.svg",width:"50",height:"50",className:"d-inline-block align-top",alt:""})),r.a.createElement(g.a,{className:"mr-auto"},r.a.createElement(g.a.Link,null,"Messages"),r.a.createElement(g.a.Link,null,"Notifications"),r.a.createElement(g.a.Link,null,"Help")))),r.a.createElement("h1",{className:"post-header"},"Create a post"),r.a.createElement("div",{className:"post-container"},r.a.createElement("form",{className:"post-form"},r.a.createElement("label",{className:"post-form-label"},"Post Title"),r.a.createElement("input",{value:l,onChange:function(e){m(e.target.value)},className:"post-form-input-title"}),r.a.createElement("label",{className:"post-form-label"},"Post Topic"),r.a.createElement("input",{value:f,onChange:function(e){d(e.target.value)},className:"post-form-input-title"}),r.a.createElement("label",{className:"post-form-label"},"Post Text"),r.a.createElement("textarea",{value:a,onChange:function(e){o(e.target.value)},className:"post-form-input-body"}),r.a.createElement("label",{className:"post-form-label"},"Post Picture"),r.a.createElement(F.a,{withIcon:!0,imgExtension:[".jpg","jpeg",".gif",".png",".gif"],maxFileSize:1e7,buttonText:"Add a picture to your post.",className:"post-pic-upload",onChange:S}),r.a.createElement("input",{type:"checkbox",id:"anon",className:"post-check-box",onChange:function(e){j(0==v?1:0)}}),r.a.createElement("label",{className:"post-check-label"},"Make this post anonymously"),r.a.createElement("button",{type:"submit",className:"post-submit-btn",onClick:function(e){return function(e){if(e.preventDefault(),function(e){var t=e.postTitle,a=e.postContent,n=e.postTopic,r=e.updateErrorMessage,o=e.updateSuccessMessage,c=e.image;if(o(""),r(""),""===t)r("Please enter a title for your post.");else if(""===a)r("Post body cannot be empty.");else if(a.length>750&&null===c)r("Post body cannot exceed 750 characters");else if(a.length>100&&null!==c)r("Captions cannot exceed 100 characters");else if(t.length>100)r("Post title cannot exceed 100 characters");else{if(!(n.length>20))return!0;r("Post topic cannot exceed 20 characters")}return!1}({postTitle:l,postContent:a,postTopic:f,updateErrorMessage:_,updateSuccessMessage:I,image:w})){var t={title:l,content:a,anon:v,topic:f};fetch("http://weave.projectcarbon.io/server/createpost/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+B},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message)_(e.error_message);else{if(console.log(w),null!==w&&w.length>0){var t=new FormData,a=w[w.length-1];t.append("image",a,a.name),fetch("http://weave.projectcarbon.io/server/createimage/",{method:"POST",headers:{Authorization:"Bearer "+B},body:t}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}I("Post Created!")}})).catch((function(e){console.error(e),alert(e)}))}}(e)}},"Create Post"),A,z),r.a.createElement("a",{href:"javascript:history.back()",className:"return-link"},"go back")))}function R(e){var t=e.message;return r.a.createElement("div",{className:"post-error-bubble"},r.a.createElement("p",{className:"post-error-message"},t))}function Z(e){var t=e.message;return r.a.createElement("div",{className:"success-error-bubble"},r.a.createElement("p",{className:"post-error-message"},t))}a(77);function K(){var e=localStorage.getItem("access_token");return e||(e=""),r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"saved-posts-content"},r.a.createElement(E,null),r.a.createElement("div",{className:"saved-posts-container"},r.a.createElement("h1",{className:"saved-posts-heading"},"Your saved posts:"),r.a.createElement(x,{route:"savedposts/"}),r.a.createElement("a",{href:"javascript:history.back()",className:"saved-posts-return"},"go back"))))}a(78),a(79);function Q(e){var t=e.postId,a=e.reload,o=Object(n.useState)(""),c=Object(i.a)(o,2),s=c[0],l=c[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),p=u[0],f=u[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),d=g[0],b=g[1],E=""!==p?r.a.createElement(q,{message:p}):null,v=""!=d?r.a.createElement(X,{message:d}):null,j=localStorage.getItem("access_token");j||(j=""),Object(n.useEffect)((function(){fetch("http://weave.projectcarbon.io/server/protected",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+j}}).then((function(e){return e.json()})).then((function(e){e.logged_in})).catch((function(e){alert("Err in console"),console.error(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",{className:"comment-header"},"Comment:"),r.a.createElement("div",{className:"comment-container"},r.a.createElement("form",{className:"comment-form"},r.a.createElement("label",{className:"comment-form-label"},"Comment Text"),r.a.createElement("textarea",{value:s,onChange:function(e){l(e.target.value),b(""),f("")},className:"comment-form-input-body"}),r.a.createElement("button",{type:"submit",className:"comment-submit-btn",onClick:function(e){return function(e){e.preventDefault();var n={content:s,post_id:t};fetch("http://weave.projectcarbon.io/server/createcomment/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+j},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.error_message?f(e.error_message):b("comment added!"),a()})).catch((function(e){console.error(e),alert(e)}))}(e)}},"Add Comment"),E,v)))}function q(e){var t=e.message;return r.a.createElement("div",{className:"comment-error-bubble"},r.a.createElement("p",{className:"comment-error-message"},t))}function X(e){var t=e.message;return r.a.createElement("div",{className:"comment-success-bubble"},r.a.createElement("p",{className:"comment-error-message"},t))}function $(){var e=Object(l.f)().post_id,t=Object(n.useState)(""),a=Object(i.a)(t,2),o=(a[0],a[1]),c=Object(n.useState)([]),s=Object(i.a)(c,2),m=s[0],u=s[1],p=Object(n.useState)([]),f=Object(i.a)(p,2),h=(f[0],f[1],Object(n.useState)(0)),g=Object(i.a)(h,2),b=(g[0],g[1]),v=Object(n.useState)(0),j=Object(i.a)(v,2),O=(j[0],j[1]),w=Object(n.useState)(0),S=Object(i.a)(w,2),y=S[0],k=S[1],C=Object(n.useState)(0),_=Object(i.a)(C,2),T=(_[0],_[1]),P=localStorage.getItem("access_token");P||(P="");var I="http://weave.projectcarbon.io/server/post/"+e;Object(n.useEffect)((function(){fetch(I,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}}).then((function(e){return e.json()})).then((function(e){"User does not exist"==e.error_message&&(o(e.error_message),window.location="/404"),"Blocked from content"==e.error_message&&(window.location="/blocked"),u(e);var t=e.score;T(t)})).catch((function(e){console.error(e)}));var t={post_id:e};fetch("http://weave.projectcarbon.io/server/poststates/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+P},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"User does not exist"==e.error_message&&(o(e.error_message),window.location="/404");var t=e.saved,a=e.voted;b(t),O(a)})).catch((function(e){console.error(e),alert(e)}))}),[y]);m.topic_name,m.date_created,m.post_type,m.pic_path,m.title,m.content,m.creator;return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"post-page-content"},r.a.createElement(E,{className:"post-sidebar"}),r.a.createElement("div",{className:"not-post-sidebar"},r.a.createElement("div",{className:"post-wrapper"},r.a.createElement(N,{postId:e,redesign:!0})),r.a.createElement("div",{className:"comment-wrapper"},r.a.createElement(Q,{postId:e,reload:function(){k(!y)}})),r.a.createElement("p",{className:"comment-heading"},"Comments:"),r.a.createElement("div",{className:"comments-container"},r.a.createElement(x,{route:"postcomments/",post_id:e,elementType:"comment",reloadFlag:y})),r.a.createElement("a",{href:"javascript:history.back()",className:"topic-return"},"go back"))))}a(80);function ee(){var e=Object(l.f)().topic_name,t=Object(n.useState)([]),a=Object(i.a)(t,2),o=(a[0],a[1],Object(n.useState)([])),c=Object(i.a)(o,2),s=c[0],m=c[1],u=localStorage.getItem("access_token");u||(u=""),Object(n.useEffect)((function(){fetch("http://weave.projectcarbon.io/server/topic/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}}).then((function(e){return e.json()})).then((function(e){e.error_message||e.msg;m(e)})).catch((function(e){console.error(e)}))}),[]);var p=s.follower_count,f=(s.topic_name,s.follow);return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"topic-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"topic-display"},r.a.createElement("h1",{className:"topic-heading"},"Welcome to the ",r.a.createElement("b",null,e)," topic:"),r.a.createElement("p",{className:"topic-followers"},"Topic Followers: ",p),r.a.createElement(I,{className:"topic-follow-button",followType:"topic",toFollow:e,initialState:f}),r.a.createElement(x,{route:"topicposts/",topic:e}),r.a.createElement("a",{href:"javascript:history.back()",className:"topic-return"},"go back"))))}a(81);function te(){var e=localStorage.getItem("access_token");return e||(e=""),r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"timeline-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"timeline-display"},r.a.createElement("h1",{className:"timeline-heading"},"Your timeline:"),r.a.createElement(x,{route:"timeline"}),r.a.createElement("a",{href:"javascript:history.back()",className:"timeline-return"},"go back"))))}a(82);function ae(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),f=p[0],h=p[1],g=Object(n.useState)(""),b=Object(i.a)(g,2),v=b[0],j=b[1],N=Object(n.useState)(""),O=Object(i.a)(N,2),w=O[0],S=O[1],y=Object(n.useState)(""),k=Object(i.a)(y,2),C=k[0],_=k[1],T=Object(n.useState)(""),P=Object(i.a)(T,2),x=P[0],I=P[1],B=Object(n.useState)(localStorage.getItem("access_token")),A=Object(i.a)(B,2),z=A[0],M=A[1];null==z&&(window.location="/login");var D=""!==w?r.a.createElement(ne,{message:w}):null,J=""!==C?r.a.createElement(ne,{message:C}):null,U=""!==x?r.a.createElement(re,{message:x}):null;return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"settings-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"settings-display"},r.a.createElement("h1",{className:"settings-heading"},"Modify your settings"),r.a.createElement("div",{className:"settings-form-box"},r.a.createElement("form",{className:"settings-form"},r.a.createElement("label",{className:"settings-label"},"Enter your current password:"),r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value),S(""),_(""),I("")},type:"password",className:"settings-input"}),r.a.createElement("hr",{className:"settings-divider"}),r.a.createElement("label",{className:"settings-label"},"Enter a new password:"),r.a.createElement("input",{value:l,onChange:function(e){m(e.target.value),S(""),_(""),I("")},type:"password",className:"settings-input"}),r.a.createElement("label",{className:"settings-label"},"Enter a new username:"),r.a.createElement("input",{value:f,onChange:function(e){h(e.target.value),S(""),_(""),I("")},className:"settings-input"}),r.a.createElement("label",{className:"settings-label"},"Enter a new email:"),r.a.createElement("input",{value:v,onChange:function(e){j(e.target.value),S(""),_(""),I("")},className:"settings-input"}),r.a.createElement("hr",{className:"settings-divider"}),r.a.createElement("a",{href:"/blockedusers"},"Blocked Users")," ",r.a.createElement("br",null),r.a.createElement("hr",{className:"settings-divider"}),r.a.createElement("input",{type:"checkbox",className:"settings-checkbox"}),r.a.createElement("label",{className:"settings-label-header"},"Activate privacy mode"),r.a.createElement("label",{className:"settings-label"},"When privacy mode is activated, you will not receieve direct messages from anyone but the users you have followed."),r.a.createElement("button",{className:"settings-button",onClick:function(e){return function(e){e.preventDefault();var t={currentpass:a,newemail:v,newpass:l,newusername:f,privacy:0};fetch("http://weave.projectcarbon.io/server/editsettings/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+z},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message||e.msg)_(e.error_message);else{var t=e.access_token,a=e.refresh_token;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",a),M(localStorage.getItem("access_token")),I("Settings updated!")}})).catch((function(e){console.error(e)}))}(e)}},"Update Settings"),J,U,r.a.createElement("hr",{className:"settings-divider"}),r.a.createElement("label",{className:"delete-label"},"If you are ready to end your time here on Weave, enter your password and then click the button below. THIS ACTION CANNOT BE UNDONE."),r.a.createElement("button",{className:"delete-button",onClick:function(e){return function(e){e.preventDefault();var t={password:a};fetch("http://weave.projectcarbon.io/server/deleteaccount/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+z},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error_message||e.msg)S(e.error_message);else{var t=localStorage.getItem("access_token");fetch("http://weave.projectcarbon.io/server/logout",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){var t=e.refresh_token;fetch("http://weave.projectcarbon.io/server/logout2",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){localStorage.clear("access_token"),localStorage.clear("refresh_token")})).catch((function(e){console.error(e),alert("error: check console for details")}))})).catch((function(e){console.error(e),alert("error: check console for details")}))}})).catch((function(e){console.error(e)}))}(e)}},"Delete My Account"),D)))))}function ne(e){var t=e.message;return r.a.createElement("div",{className:"edit-error-bubble"},r.a.createElement("p",{className:"edit-error-message"},t))}function re(e){var t=e.message;return r.a.createElement("div",{className:"edit-success-bubble"},r.a.createElement("p",{className:"edit-error-message"},t))}function oe(){return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"settings-container"},r.a.createElement(E,null),r.a.createElement(x,{route:"blockedusers/",elementType:"profile"})))}a(83);function ce(e){var t=e.messageId,a=Object(n.useState)(""),o=Object(i.a)(a,2),c=(o[0],o[1]),s=Object(n.useState)([]),l=Object(i.a)(s,2),m=l[0],u=l[1],p=localStorage.getItem("access_token");null==p&&(window.location="/login");var f="http://weave.projectcarbon.io/server/message/"+t+"/";Object(n.useEffect)((function(){fetch(f,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}}).then((function(e){return e.json()})).then((function(e){e.error_message&&(c(e.error_message),window.location="/404"),u(e)})).catch((function(e){console.error(e)}))}),[]);var h=m.date_created,g=m.content,d=m.receiver;return r.a.createElement("div",null,r.a.createElement("div",{className:"message-sender-container"},r.a.createElement("p",{className:"message-text"},h),r.a.createElement("p",{className:"message-text"},d),r.a.createElement("p",{className:"message-content"},g)))}a(84);function se(e){var t=e.sender,a=Object(n.useState)([]),o=Object(i.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)([]),m=Object(i.a)(l,2),u=m[0],p=m[1],f=localStorage.getItem("access_token");return null==f&&(window.location="/login"),Object(n.useEffect)((function(){fetch("http://weave.projectcarbon.io/server/allmessages/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f},body:JSON.stringify({start:0,end:10})}).then((function(e){return e.json()})).then((function(e){var t=e.pull_list;e.rowCount;p(t)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=[];u&&(u.forEach((function(a){console.log(a),e.push(r.a.createElement(ce,{key:a,messageId:a,user1:t}))})),s(e),0===c.length&&(e=r.a.createElement("p",null,"No Posts!")))}),[u]),r.a.createElement("div",{className:"messages-display"},c)}a(85);function le(){var e=Object(l.f)().username,t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),u=m[0],p=m[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),g=h[0],b=h[1],v=localStorage.getItem("access_token");null==v&&(window.location="/login");var j=""!==g?r.a.createElement(ie,{message:g}):null;return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("div",{className:"chat-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"chat-content"},r.a.createElement(se,{sender:e}),r.a.createElement("form",{className:"chat-form"},r.a.createElement("label",{className:"chat-form-label"},"Message"),r.a.createElement("input",{value:o,onChange:function(e){c(e.target.value),b("")},className:"chat-form-input"}),r.a.createElement("label",{className:"chat-form-label"},"Receiver"),r.a.createElement("input",{value:u,onChange:function(e){p(e.target.value),b("")},className:"chat-form-input"}),r.a.createElement("button",{type:"submit",className:"chat-submit-btn",onClick:function(e){return function(e){if(e.preventDefault(),function(e){var t=e.message,a=e.receiver,n=e.updateErrorMessage;if(""===t)n("Please enter a message.");else{if(""!==a)return!0;n("Please enter a receiver.")}return!1}({message:o,receiver:u,updateErrorMessage:b})){var t={content:o,receiver:u};console.log(t);fetch("http://weave.projectcarbon.io/server/createmessage/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+v},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.error_message&&b(e.error_message)})).catch((function(e){console.error(e),alert("error: check console for details")}))}}(e)}},"Send Message")),j)))}function ie(e){var t=e.message;return r.a.createElement("div",{className:"chat-error-bubble"},r.a.createElement("p",{className:"chat-error-message"},t))}function me(){return r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(m,null)),r.a.createElement(l.a,{path:"/resetpassword"}),r.a.createElement(l.a,{path:"/savedposts"},r.a.createElement(K,null)),r.a.createElement(l.a,{path:"/register"},r.a.createElement(p,null)),r.a.createElement(l.a,{path:"/login"},r.a.createElement(m,null)),r.a.createElement(l.a,{path:"/profile/:username"},r.a.createElement(A,null)),r.a.createElement(l.a,{path:"/profile"},r.a.createElement(A,null)),r.a.createElement(l.a,{path:"/editprofile"},r.a.createElement(L,null)),r.a.createElement(l.a,{path:"/chat/:username"},r.a.createElement(le,null)),r.a.createElement(l.a,{path:"/settings"},r.a.createElement(ae,null)),r.a.createElement(l.a,{path:"/timeline"},r.a.createElement(te,null)),r.a.createElement(l.a,{path:"/createpost"},r.a.createElement(W,null)),r.a.createElement(l.a,{path:"/post/:post_id"},r.a.createElement($,null)),r.a.createElement(l.a,{path:"/topic/:topic_name"},r.a.createElement(ee,null)),r.a.createElement(l.a,{path:"/blocked"},r.a.createElement(V,null)),r.a.createElement(l.a,{path:"/blockedusers"},r.a.createElement(oe,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(H,null))))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ded01284.chunk.js.map