{"version":3,"sources":["pages/auth/Login/Login.jsx","pages/auth/Register/Register.jsx","Shared_Components/NavBar.jsx","Shared_Components/Sidebar/Sidebar.jsx","Shared_Components/Post/Post.jsx","Shared_Components/Comment/Comment.jsx","Shared_Components/ProfilePreview/ProfilePreview.jsx","Chat/Message.jsx","Shared_Components/Feed/Feed.jsx","Shared_Components/Follow/Follow.jsx","Shared_Components/Block/Block.jsx","user_info/Profile/Profile.jsx","user_info/Profile/EditProfile.jsx","error_pages/NotFound.jsx","error_pages/Blocked.jsx","pages/post_info/CreatePost/CreatePost.jsx","user_info/SavedPosts/SavedPosts.jsx","pages/post_info/CommentCreator/CommentCreator.jsx","pages/post_info/PostPage/PostPage.jsx","pages/post_info/Topics/TopicPage.jsx","pages/post_info/Timeline/Timeline.jsx","user_info/Settings/Settings.jsx","user_info/Messages/MessagingPage.jsx","user_info/BlockedUsers/BlockedUsers.jsx","Chat/ChatDisplay.jsx","Chat/Chat.jsx","index.js"],"names":["Login","useState","loginName","updateLoginName","password","updatePassword","errorMessage","updateErrorMessage","errObject","ErrorBubble","message","className","src","alt","value","onChange","e","target","type","onClick","event","preventDefault","isFormValid","body","username","fetch","method","headers","JSON","stringify","then","response","json","data","error_message","access_token","refresh_token","console","log","localStorage","setItem","window","location","catch","err","error","alert","onSubmit","href","firstName","updateFirstName","lastName","updateLastName","email","updateEmail","confirmPassword","updateConfirmPassword","isOverThirteen","updateAgeCheck","checked","length","NavBar","searchString","updateSearchString","searchType","updateSearchType","rel","integrity","crossOrigin","Navbar","expand","bg","variant","Brand","width","height","Nav","Link","id","search_string","search_type","msg","search","Sidebar","React","xPosition","setX","useEffect","style","transform","getItem","clear","logout","Post","postId","userName","isMinimized","redesign","postdata","setPostData","saveCheck","setSaved","voteCheck","setVoted","votes","setVotes","endpoint","score","post_id","saved","voted","topic_name","date_created","post_type","pic_path","title","content","creator","isUpvoted","isDownVoted","text","author","isSaved","savePost","vote","bookmarkFill","isUpvotedFlag","isDownVotedFlag","containerClass","VerticalVoteBar","upvoteClick","downvoteClick","BookmarkIcon","fill","PostComponent","post","voteState","upVoteFill","downVoteFill","VoteArrowIcon","viewBox","xmlns","d","Comment","commentId","commentdata","setCommentData","comment_id","user_parent","profileLink","openedClassName","triggerClassName","triggerOpenedClassName","trigger","class","fontSize","color","ProfilePreview","profile_link","Message","messageId","messageData","setMessageData","receiver","sender","Feed","route","topic","elementType","reloadFlag","postData","postsContent","setPostsContent","currentPage","setCurrentPage","pageCount","setPageCount","perPage","start","end","post_ids","pull_list","rowCount","Math","ceil","tester","forEach","identifier","push","key","previousLabel","nextLabel","marginPagesDisplayed","pageRangeDisplayed","onPageChange","selectedPage","selected","containerClassName","subContainerClassName","activeClassName","Follow","followType","toFollow","initialState","refresh","followed","setFollowed","followpoint","follow","following","followState","Block","toBlock","blocked","setBlocked","block","user_blocked","blockState","Profile","pageUsername","useParams","userData","setUserData","contentView","setContentView","refreshFlag","updateRefreshFlag","logged_in","UserInfo","UserPosts","user_bio","user_pic","follower_count","following_count","topic_count","first_name","last_name","date_joined","ProfilePicture","EditProfileButton","ProfileActionButtons","setRoute","element","setElem","EditProfile","bio","updateBio","successMessage","updateSuccessMessage","image","saveImage","updateToken","onload","isLoggedIn","firstname","lastname","biocontent","formData","FormData","lastImg","append","name","succObject","SuccessBubble","crossorigin","sticky","withIcon","imgExtension","maxFileSize","buttonText","NotFound","Blocked","Timeline","postContent","updatePostContent","postTitle","updatePostTitle","postTopic","updatePostTopic","isAnon","updateIsAnon","successObject","anon","SavedPosts","CommentCreator","reload","commentContent","updateCommentContent","pagePost","updateReloadFlag","TopicPosts","topicData","setTopicData","TimelinePosts","Settings","currPass","updateCurrPass","newPass","updateNewPass","newUser","updateNewUser","newEmail","updateNewEmail","deleteErrorMessage","updateDeleteErrorMessage","normalErrorMessage","updateNormalErrorMessage","deleteErrObject","normalErrObject","JSONbody","currentpass","newemail","newpass","newusername","privacy","UpdateSettings","DeleteAccount","MessagingPage","uploadChatMessage","setReceiver","isMessageValid","BlockedUsers","ChatDisplay","messageContent","setMessageContent","message_ids","user1","Chat","AppRouter","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.47de7b8c.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./login.css\";\r\n\r\n//module.exports(isFormValid);\r\n//module.exports(Login);\r\n\r\nexport default function Login() {\r\n  const [loginName, updateLoginName] = useState(\"\");\r\n  const [password, updatePassword] = useState(\"\");\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (isFormValid({ loginName, password, updateErrorMessage })) {\r\n      const body = {\r\n        username: loginName,\r\n        password: password\r\n      }\r\n      /*\r\n       * post to backend\r\n       */\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/login/\";\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n        } else {\r\n          const { access_token, refresh_token, username } = data;\r\n          console.log(access_token);\r\n          localStorage.setItem('data', data);\r\n          localStorage.setItem('access_token', access_token);\r\n          localStorage.setItem('refresh_token', refresh_token);\r\n          window.location = \"profile/\" + username;\r\n        }\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n    }\r\n  }\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"login-page-title\">Join the conversation</h1>\r\n      <div className=\"login-container\">\r\n        <img src=\"./img/weave-icon.svg\" className=\"login-icon\" alt=\"\" />\r\n        <form className=\"login-form\">\r\n          <label className=\"login-form-label\">username/email</label>\r\n          <input\r\n            value={loginName}\r\n            onChange={e => {\r\n              updateLoginName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }} className=\"login-form-input\"\r\n          />\r\n\r\n          <label className=\"login-form-label\">password</label>\r\n          <input\r\n            value={password}\r\n            onChange={e => {\r\n              updatePassword(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }}\r\n            type=\"password\"\r\n            className=\"login-form-input\" />\r\n          <button type=\"submit\" className=\"login-submit-btn\" onClick={(e) => onSubmit(e)}>login</button>\r\n\r\n        </form>\r\n        {errObject}\r\n        <a href=\"register\" className=\"login-link\">create an account</a>\r\n        <a href=\"profile/newuser2\" className=\"login-link\">forgot password</a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction isFormValid({ loginName, password, updateErrorMessage }) {\r\n  if (loginName === \"\") {\r\n    updateErrorMessage(\"Please enter your username or email.\");\r\n  } else if (password === \"\") {\r\n    updateErrorMessage(\"Please enter your password.\");\r\n  } else {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"login-error-bubble\">\r\n      <p className=\"login-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}","import React, { useState } from \"react\";\r\nimport \"./register.css\";\r\n\r\n//module.exports(isFormValid);\r\n//module.exports(Login);\r\n\r\nexport default function Login() {\r\n  const [loginName, updateLoginName] = useState(\"\");\r\n  const [firstName, updateFirstName] = useState(\"\");\r\n  const [lastName, updateLastName] = useState(\"\");\r\n  const [email, updateEmail] = useState(\"\");\r\n  const [password, updatePassword] = useState(\"\");\r\n  const [confirmPassword, updateConfirmPassword] = useState(\"\");\r\n  const [isOverThirteen, updateAgeCheck] = useState(false);\r\n\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (isFormValid({ loginName, firstName, lastName, password, confirmPassword, email, isOverThirteen,updateErrorMessage })) {\r\n      const body = {\r\n        username: loginName,\r\n        firstName: firstName,\r\n        lastName: lastName,\r\n        password: password,\r\n        email: email,\r\n      }\r\n      /*\r\n       * post to backend\r\n       */\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/register/\";\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n        } else {\r\n          const { access_token, refresh_token } = data;\r\n          localStorage.setItem('access_token', access_token);\r\n          localStorage.setItem('refresh_token', refresh_token);\r\n          window.location = \"profile/\" + loginName;\r\n        }\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n    }\r\n  }\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"register-page-title\">Join the conversation</h1>\r\n      <div className=\"register-container\">\r\n        <img src=\"./img/weave-icon.svg\" className=\"register-icon\" alt=\"\" />\r\n        <form className=\"register-form\">\r\n          <label className=\"register-form-label\">Username</label>\r\n          <input\r\n            value={loginName}\r\n            onChange={e => {\r\n              updateLoginName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }} className=\"register-form-input\"\r\n          />\r\n\r\n          <label className=\"register-form-label\">First Name</label>\r\n          <input\r\n            value={firstName}\r\n            onChange={e => {\r\n              updateFirstName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }} className=\"register-form-input\"\r\n          />\r\n\r\n          <label className=\"register-form-label\">Last Name</label>\r\n          <input\r\n            value={lastName}\r\n            onChange={e => {\r\n              updateLastName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }} className=\"register-form-input\"\r\n          />\r\n          \r\n          <label className=\"register-form-label\">Email</label>\r\n          <input\r\n            value={email}\r\n            onChange={e => {\r\n              updateEmail(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }} className=\"register-form-input\"\r\n          />\r\n\r\n          <label className=\"register-form-label\">Password</label>\r\n          <input\r\n            value={password}\r\n            onChange={e => {\r\n              updatePassword(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }}\r\n            type=\"password\"\r\n            className=\"register-form-input\" />\r\n\r\n          <label className=\"register-form-label\">Confirm Password</label>\r\n          <input\r\n            value={confirmPassword}\r\n            onChange={e => {\r\n              updateConfirmPassword(e.target.value);\r\n              updateErrorMessage(\"\");\r\n            }}\r\n            type=\"password\"\r\n            className=\"register-form-input\"\r\n          />\r\n\r\n          <input\r\n            className=\"register-checkbox\"\r\n            type=\"checkbox\"\r\n            checked={isOverThirteen}\r\n            onChange={e => {\r\n              updateAgeCheck(!isOverThirteen);\r\n              updateErrorMessage(\"\");\r\n            }}\r\n          />\r\n          <label className=\"register-checkbox-label\">I am 13 years old or older</label>\r\n\r\n\r\n          <button type=\"submit\" className=\"register-submit-btn\" onClick={(e) => onSubmit(e)}>create account</button>\r\n\r\n        </form>\r\n        {errObject}\r\n        <a href=\"login\" className=\"register-link\">existing user login</a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction isFormValid({ loginName, firstName, lastName, password, confirmPassword, isOverThirteen, email, updateErrorMessage }) {\r\n  if (loginName === \"\") {\r\n    updateErrorMessage(\"Please enter a username.\");\r\n  } else if (firstName === \"\") {\r\n    updateErrorMessage(\"Please enter your first name.\");\r\n  } else if (lastName === \"\") {\r\n    updateErrorMessage(\"Please enter your last name.\");\r\n  } else if (email === \"\") {\r\n    updateErrorMessage(\"Please enter your email.\");\r\n  } else if (password === \"\") {\r\n    updateErrorMessage(\"Please enter a password.\");\r\n  } else if (password !== confirmPassword) {\r\n    updateErrorMessage(\"The passwords do not match.\")\r\n  }\telse if (password.length < 6) {\r\n\tupdateErrorMessage(\"Password should be 6 character minimum.\")\r\n  } else if (!isOverThirteen) {\r\n    updateErrorMessage(\"You must be 13 or older to join Weave.\")\r\n  } else {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n//module.exports(isFormValid);\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"register-error-bubble\">\r\n      <p className=\"register-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem } from 'react-bootstrap';\r\nimport \"./navbar.css\";\r\n\r\nexport default function NavBar() {\r\n\t\r\n  const [searchString, updateSearchString] = useState(\"\");\r\n  const [searchType, updateSearchType] = useState(\"profiles\");\r\n  \r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n  \r\n  const search = () => {\r\n\t\r\n\tupdateErrorMessage(\"\");\r\n\t\r\n\tconst body = {\r\n      search_string: searchString,\r\n      search_type: searchType,\r\n    }\t\r\n\t\r\n\tfetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + '/search/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n\t  body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      //TODO- check what data.msg does\r\n      const errorMessage = data.error_message || data.msg;\r\n      if (!data.error_message) {\r\n        if (searchType == \"profiles\") {\r\n\t\t  window.location = \"/profile/\" + searchString;\r\n\t\t}\r\n\t\telse {\r\n\t\t  window.location = \"/topic/\" + searchString;\r\n\t\t}\r\n      }\r\n\t  else {\r\n\t    updateErrorMessage(\"No Results.\");\r\n\t  }\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      {/* Bootstrap Stylesheet */}\r\n      <link\r\n        rel=\"stylesheet\"\r\n        href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\"\r\n        integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\"\r\n        crossOrigin=\"anonymous\"\r\n      />\r\n      {/* Navbar */}\r\n      <Navbar expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"/timeline\">\r\n          <img src=\"/img/weave-icon.svg\" width=\"50\" height=\"50\"\r\n            className=\"d-inline-block align-top\" alt=\"\" />\r\n        </Navbar.Brand>\r\n        <Nav className=\"mr-auto\">\r\n          <Nav.Link href=\"/messages\">Messages</Nav.Link>\r\n          <Nav.Link>Notifications</Nav.Link>\r\n          <Nav.Link>Help</Nav.Link>\r\n\t\t  <input \r\n\t\t\tvalue={searchString}\r\n\t\t\tonChange={e => {\r\n\t\t\t\tupdateSearchString(e.target.value);\r\n\t\t\t}}\r\n\t\t  />\r\n\t\t  <select id=\"type\" onChange={e => {updateSearchType(e.target.value)}}>\r\n\t\t\t<option value=\"profiles\">profiles</option>\r\n\t\t\t<option value=\"topics\">topics</option>\r\n\t\t  </select>\r\n\t\t  <button  onClick={(e) => search()}>Search</button>\r\n\t\t  {errObject}\r\n        </Nav>\r\n      </Navbar>\r\n    </div>\r\n  )\r\n  //return CustomNavbar();\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"comment-error-bubble\">\r\n      <p className=\"comment-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport \"./sidebar.css\";\r\n\r\nexport default function Sidebar() {\r\n  const [xPosition, setX] = React.useState(-180);\r\n\r\n  useEffect(() => {\r\n    setX(0);\r\n  }, []);\r\n\r\n  const toggleMenu = () => {\r\n    if (xPosition < 0) {\r\n      setX(0);\r\n    } else {\r\n      setX(-180);\r\n    }\r\n  };\r\n\r\n  //delete JWT token and refresh\r\n  const logout = () => {\r\n    const access_token = localStorage.getItem('access_token');\r\n    const logoutEndpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/logout\";\r\n    fetch(logoutEndpoint, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n    }).then(response => response.json()).then(data => {\r\n      const { refresh_token } = data;\r\n      const endpoint2 = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/logout2\";\r\n      fetch(endpoint2, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + refresh_token\r\n        },\r\n      }).then(response => response.json()).then(data => {\r\n        localStorage.clear(\"access_token\");\r\n        localStorage.clear(\"refresh_token\");\r\n        window.location = \"../\"\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n    }).catch(err => {\r\n      console.error(err);\r\n      alert(\"error: check console for details\");\r\n    });\r\n\r\n  };\r\n\r\n  return (\r\n    <div className=\"sidebar-wrapper\">\r\n      <div\r\n        className=\"sidebar\"\r\n        style={{ transform: `translatex(${xPosition}px)` }}\r\n      >\r\n        <button\r\n          onClick={() => toggleMenu()}\r\n          className=\"profile-toggle-menu\"\r\n          style={{\r\n            transform: `translate(${180}px, 20vh)`\r\n          }}\r\n        ></button>\r\n        <div className=\"side-bar-menu\">\r\n          {/* These need to link to actual pages eventually */}\r\n          <h1 className=\"side-bar-heading\">Explore your web:</h1>\r\n          <a href=\"/timeline\" className=\"side-bar-selection\">Your timeline</a> <br />\r\n          <a href=\"/profile/\" className=\"side-bar-selection\">Profile</a> <br />\r\n          <a href=\"/createpost\" className=\"side-bar-selection\">Create a post</a> <br />\r\n          <a href=\"/savedposts\" className=\"side-bar-selection\">Saved posts</a> <br />\r\n          <a href=\"/settings\" className=\"side-bar-selection\">Settings</a> <br />\r\n          <button className=\"side-bar-logout\" onClick={(e) => logout(e)}>Logout</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Linkify from 'react-linkify';\r\n\r\nimport \"./post.css\";\r\n\r\nexport default function Post({\r\n  postId, userName, redesign, isMinimized\r\n}) {\r\n\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [postdata, setPostData] = useState([]);\r\n  {/* keeps track if user has saved or voted */ }\r\n  const [saveCheck, setSaved] = useState(0);\r\n  const [voteCheck, setVoted] = useState(0);\r\n  {/* current score of post */ }\r\n  const [votes, setVotes] = useState(0);\r\n\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n\r\n  const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/post/\" + postId;\r\n  const statepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/poststates/\"\r\n\r\n  {/* renders the post with fetch data and the states of the save and voting buttons */ }\r\n  useEffect(() => {\r\n    fetch(endpoint, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      setPostData(data);\r\n      const { score } = data;\r\n      setVotes(score);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n\r\n    const body = {\r\n      username: userName,\r\n      post_id: postId,\r\n    }\r\n\t\r\n\tif (access_token != \"\"){\r\n      fetch(statepoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n       body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n          window.location = \"/404\"\r\n        }\r\n        const { saved, voted } = data;\r\n        setSaved(saved);\r\n        setVoted(voted);\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(err);\r\n\r\n      });\r\n\t}\r\n    setVoted(postdata.score);\r\n  }, [])\r\n\r\n  const { topic_name, date_created, post_type, pic_path: src, title, content, creator, score} = postdata;\r\n\r\n  {/* sends the votes to the server and receives the change in score */ }\r\n  const vote = (value) => {\r\n\t  \r\n\tif (access_token == \"\") {\r\n\t  window.location = \"/login\"\r\n\t}  \r\n\t  \r\n    setVoted(value);\r\n    const body = {\r\n      username: userName,\r\n      type: '1',\r\n      id: postId,\r\n      vote: value,\r\n    }\r\n    fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/vote/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      // if (data.error_message) {\r\n      //   updateErrorMessage(data.error_message);\r\n      //   window.location = \"/404\"\r\n      // }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      const { score, voteState } = data;\r\n      setVotes(score);\r\n      setVoted(voteState);\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n  };\r\n\r\n  {/* sends the saved/unsaved postId to the server */ }\r\n  const savePost = (value) => {\r\n\t\r\n\tif (access_token == \"\") {\r\n\t  window.location = \"/login\"\r\n\t}\r\n\t\r\n    setSaved(value);\r\n    const body = {\r\n      username: userName,\r\n      post: postId,\r\n      type: value,\r\n    }\r\n    fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/save/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      if (data.msg) {\r\n        window.location = \"/login\"\r\n      }\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Save check and vote state should not be mutable states in React. Should be moved to post response\r\n   */\r\n\r\n  const postLink = \"/post/\" + postId;\r\n  const profileLink = \"/profile/\" + creator;\r\n  const topicLink = \"/topic/\" + topic_name;\r\n\r\n  return PostComponent({ author: creator, title, text: content, topic_name, score: votes, isSaved: saveCheck, savePost, voteCheck, vote, isMinimized, postId, src });\r\n\r\n}\r\n\r\nfunction PostComponent({ isUpvoted, isDownVoted, score, title, text, author, isSaved, savePost, voteCheck, vote, isMinimized, postId, src, topic_name }) {\r\n  const bookmarkFill = (isSaved == 1) ? \"red\" : \"rgba(225, 225, 225, 1)\";\r\n  const bookmarkClicked = () => {\r\n    console.log(isSaved);\r\n    if (isSaved == -1) {\r\n      savePost(1);\r\n    } else {\r\n      savePost(-1);\r\n    }\r\n  }\r\n  let isUpvotedFlag = voteCheck == 1;\r\n  let isDownVotedFlag = voteCheck == -1;\r\n  const upvote = () => {\r\n    vote(1);\r\n  }\r\n  const downvote = () => {\r\n    vote(-1);\r\n  }\r\n  const containerClass = isMinimized ? \"post-component-container post-component-container-collapsed\" : \"post-component-container\";\r\n  const onClick = () => {\r\n    if (isMinimized) {\r\n      window.location.href = \"/post/\" + postId;\r\n    }\r\n  }\r\n  return (\r\n    <div className={containerClass}>\r\n      <VerticalVoteBar\r\n        isUpvoted={isUpvotedFlag}\r\n        isDownVoted={isDownVotedFlag}\r\n        score={score}\r\n        upvoteClick={() => upvote()}\r\n        downvoteClick={() => downvote()}\r\n      />\r\n      <BookmarkIcon className=\"post-component-bookmark\" fill={bookmarkFill} onClick={() => bookmarkClicked()} />\r\n      <p className=\"post-component-topic\"><a href={\"/topic/\" + topic_name}> w/{topic_name}</a></p>\r\n      <div className=\"post-component-content\" onClick={() => onClick()}>\r\n        <p className=\"post-component-author\"><a href = {\"/profile/\" + author}> @{author}</a></p>\r\n        <h2 className=\"post-component-title\">{title}</h2>\r\n        <img src={src} className=\"post-component-image\" />\r\n\t\t<Linkify>\r\n\t\t\t<p className=\"post-component-content-text\">\r\n\t\t\t  {text}\r\n\t\t\t</p>\r\n\t\t</Linkify>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction VerticalVoteBar({ score, isUpvoted, isDownVoted, upvoteClick, downvoteClick }) {\r\n  const upVoteFill = isUpvoted ? \"#A866B9\" : \"#9C9C9C\";\r\n  const downVoteFill = isDownVoted ? \"#A866B9\" : \"#9C9C9C\";\r\n  return (\r\n    <div className=\"post-component-vertical-vote-bar\">\r\n      <div className=\"post-component-vertical-vote-container\">\r\n        <VoteArrowIcon\r\n          fill={upVoteFill}\r\n          className=\"post-component-vote-arrow-upvote\"\r\n          onClick={() => { upvoteClick() }}\r\n        />\r\n        <p className=\"post-component-score\">{score}</p>\r\n        <VoteArrowIcon\r\n          fill={downVoteFill}\r\n          className=\"post-component-vote-arrow-downvote\"\r\n          onClick={() => { downvoteClick() }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VoteArrowIcon({ fill, className, onClick }) {\r\n\r\n  return (\r\n    <svg width=\"24\" height=\"14\" viewBox=\"0 0 24 14\" xmlns=\"http://www.w3.org/2000/svg\" className={className} onClick={() => onClick()}>\r\n      <path d=\"M10.9393 13.0607C11.5251 13.6464 12.4749 13.6464 13.0607 13.0607L22.6066 3.51472C23.1924 2.92893 23.1924 1.97919 22.6066 1.3934C22.0208 0.807611 21.0711 0.807611 20.4853 1.3934L12 9.87868L3.51472 1.3934C2.92893 0.807611 1.97919 0.807611 1.3934 1.3934C0.807611 1.97919 0.807611 2.92893 1.3934 3.51472L10.9393 13.0607ZM10.5 11V12H13.5V11H10.5Z\" fill={fill} />\r\n    </svg>\r\n  )\r\n}\r\n\r\nfunction BookmarkIcon({ fill, className, onClick }) {\r\n  return (\r\n\r\n    <svg viewBox=\"-58 0 404 404.54135\" width=\"404pt\" xmlns=\"http://www.w3.org/2000/svg\" className={className} onClick={() => onClick()}>\r\n      <path d=\"m277.527344 0h-267.257813c-5.523437 0-10 4.476562-10 10v374.527344c-.011719 7.503906 4.183594 14.378906 10.855469 17.804687 6.675781 3.429688 14.707031 2.832031 20.796875-1.550781l111.976563-80.265625 111.976562 80.269531c6.097656 4.367188 14.121094 4.960938 20.792969 1.535156 6.667969-3.425781 10.863281-10.292968 10.863281-17.792968v-374.527344c0-5.523438-4.480469-10-10.003906-10zm0 0\" fill={fill}  />\r\n    </svg>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Collapsible from 'react-collapsible';\r\n\r\nimport \"./comment.css\";\r\n\r\nexport default function Comment({\r\n  commentId, userName\r\n}) {\r\n\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [commentdata, setCommentData] = useState([]);\r\n  {/* keeps track if user has saved or voted */ }\r\n  const [voteCheck, setVoted] = useState(0);\r\n  {/* current score of post */ }\r\n  const [votes, setVotes] = useState(0);\r\n\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n\r\n  const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/comment/\" + commentId;\r\n  const votepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/vote/\"\r\n  const statepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/commentstates/\"\r\n\r\n  {/* renders the post with fetch data and the states of the save and voting buttons */ }\r\n  useEffect(() => {\r\n    fetch(endpoint, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      setCommentData(data);\r\n      const { score } = data;\r\n      setVotes(score);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n\r\n    const body = {\r\n      username: userName,\r\n      comment_id: commentId,\r\n    }\r\n\r\n    fetch(statepoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      /* setStateData(data); */\r\n      const { voted } = data;\r\n      setVoted(voted);\r\n    }).catch(err => {\r\n      console.error(err);\r\n      alert(err);\r\n\r\n    });\r\n  }, [])\r\n\r\n  const { date_created, content, user_parent } = commentdata;\r\n\r\n  {/* sends the votes to the server and receives the change in score */ }\r\n  const vote = (value) => {\r\n    setVoted(value);\r\n    const body = {\r\n      username: userName,\r\n      type: '2',\r\n      id: commentId,\r\n      vote: value,\r\n    }\r\n    fetch(votepoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      //if (data.error_message) {\r\n      //    updateErrorMessage(data.error_message);\r\n      //    window.location = \"/404\"\r\n      // }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      const { score, voteState } = data;\r\n      setVotes(score);\r\n      setVoted(voteState);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n  };\r\n\r\n  const profileLink = \"/profile/\" + user_parent;\r\n\r\n  return (\r\n    <div>\r\n      <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"></link>\r\n      <Collapsible className=\"comment-content-header\" openedClassName=\"comment-content-header-open\" triggerClassName=\"comment-trigger\" triggerOpenedClassName=\"comment-trigger-open\" trigger={user_parent}>\r\n        <div className=\"comment-content-container\">\r\n          <div className=\"comment-vote-container\">\r\n            {/* replace with upvote and downvote */}\r\n            {voteCheck > 0 ? (\r\n              <i class=\"fa fa-arrow-circle-up\" style={{ fontSize: '36px', color: 'red' }} onClick={() => vote(1, 0)} ></i>\r\n\r\n            ) : (\r\n                <i class=\"fa fa-arrow-circle-up\" style={{ fontSize: '36px' }} onClick={() => vote(1, 1)} ></i>\r\n              )}\r\n            <p className=\"post-vote-score\">{votes}</p>\r\n            {voteCheck < 0 ? (\r\n              <i class=\"fa fa-arrow-circle-down\" style={{ fontSize: '36px', color: 'red' }} onClick={() => vote(-1, 0)} ></i>\r\n            ) : (\r\n                <i class=\"fa fa-arrow-circle-down\" style={{ fontSize: '36px' }} onClick={() => vote(-1, -1)} ></i>\r\n              )}\r\n          </div>\r\n          <div className=\"comment-text-container\">\r\n            {/* align these better later */}\r\n            <p className=\"comment-text\"><a href={profileLink}>{user_parent}</a></p>\r\n            <p className=\"comment-text\">{date_created}</p>\r\n            <p className=\"comment-content\">{content}</p>\r\n          </div>\r\n        </div>\r\n      </Collapsible>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\n\r\nexport default function ProfilePreview({username}){\t\r\n  \r\n\tlet access_token = localStorage.getItem('access_token');\r\n\tif (!access_token) {\r\n\t\taccess_token = \"\";\r\n\t}\r\n\tlet profile_link = \"/profile/\" + username + \"/\";\r\n  \treturn (\r\n\t    <div>\r\n\t\t\t<a href={profile_link} >{username}</a> <br />\r\n\t\t</div>\r\n\t);\r\n\r\n}","import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"./message.css\";\r\n\r\nexport default function Message({\r\n  messageId\r\n}) {\r\n\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [messageData, setMessageData] = useState([]);\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (access_token == null) {\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/message/\" + messageId + \"/\";\r\n\r\n  {/* renders the post with fetch data and the states of the save and voting buttons */ }\r\n  useEffect(() => {\r\n    fetch(endpoint, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      setMessageData(data);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n  }, [messageId])\r\n\r\n  const { date_created, content, receiver, sender, username} = messageData;\r\n  return (\r\n    <div>\r\n        { username === receiver ? (\r\n          <div className=\"message-receiver-container\">\r\n            <p className=\"message-text\">{date_created}</p>\r\n            <p className=\"message-text\">from: {sender}</p>\r\n            <p className=\"message-content\">{content}</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"message-sender-container\">\r\n            <p className=\"message-text\">{date_created}</p>\r\n            <p className=\"message-text\">sent to: {receiver}</p>\r\n            <p className=\"message-content\">{content}</p>\r\n          </div>\r\n          )}\r\n        \r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Post from \"../../Shared_Components/Post/Post\";\r\nimport Comment from '../../Shared_Components/Comment/Comment';\r\nimport ProfilePreview from '../../Shared_Components/ProfilePreview/ProfilePreview';\r\nimport Message from '../../Chat/Message';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport './Feed.css';\r\n\r\nexport default function Feed({ route, topic, post_id, username, elementType, reloadFlag }) {\r\n  const [postData, setPostData] = useState([]);\r\n  const [postsContent, setPostsContent] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const [pageCount, setPageCount] = useState(0)\r\n  const [perPage] = useState(5);\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (access_token == null) {\r\n    //window.location = \"/login\"\r\n  }\r\n\r\n  useEffect(() => {\r\n    const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/\" + route;\r\n    const offset = currentPage * perPage;\r\n    const body = {\r\n      start: offset,\r\n      end: perPage,\r\n      topic: topic,\r\n      post_id: post_id,\r\n      username: username,\r\n    }\r\n    console.log(JSON.stringify(body));\r\n    console.log(endpoint);\r\n    fetch(endpoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      const { pull_list: post_ids, rowCount: rowCount } = data;\r\n      setPageCount(Math.ceil(rowCount / perPage))\r\n      setPostData(post_ids);\r\n      setCurrentPage(0)\r\n    }).catch(err => {\r\n      console.log(err);\r\n    });\r\n  }, [route, reloadFlag]);\r\n\r\n  useEffect(() => {\r\n    const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/\" + route\r\n    console.log(endpoint)\r\n    const offset = currentPage * perPage\r\n    const body = {\r\n      start: offset,\r\n      end: perPage,\r\n      topic: topic,\r\n      post_id: post_id,\r\n      username: username,\r\n    }\r\n    fetch(endpoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      const { pull_list: post_ids, rowCount: rowCount } = data;\r\n      setPageCount(Math.ceil(rowCount / perPage))\r\n      setPostData(post_ids);\r\n    }).catch(err => {\r\n      console.log(err);\r\n      // alert(\"Error in console\");\r\n    });\r\n  }, [currentPage, reloadFlag]);\r\n\r\n  useEffect(() => {\r\n    let tester = [];\r\n    if (postData) {\r\n      postData.forEach((identifier) => {\r\n        console.log(identifier)\r\n        if (elementType == \"comment\") {\r\n          tester.push(<Comment key={identifier} commentId={identifier} userName={\"schikyal\"} />)\r\n        }\r\n\t\telse if (elementType == \"profile\") {\r\n\t\t  tester.push(<ProfilePreview username={identifier} />)\t\t\r\n\t\t}\r\n\t\telse if (elementType == \"messages\") {\r\n\t\t  tester.push(<Message messageId={identifier} />)\r\n\t\t}\r\n        else {\r\n          tester.push(<Post key={identifier} postId={identifier} userName={\"schikyal\"} redesign={true} isMinimized={true} />)\r\n        }\r\n      });\r\n      setPostsContent(tester);\r\n      if (postsContent.length === 0) {\r\n        tester = <p>No Content Yet!</p>;\r\n      }\r\n    }\r\n  }, [postData, reloadFlag])\r\n\r\n\r\n  const handlePageClick = (e) => {\r\n    const selectedPage = e.selected;\r\n    setCurrentPage(selectedPage);\r\n  };\r\n\r\n  return (\r\n    <div className=\"posts-display\">\r\n      {postsContent}\r\n      <ReactPaginate\r\n        previousLabel={\"<\"}\r\n        nextLabel={\">\"}\r\n        pageCount={pageCount}\r\n        marginPagesDisplayed={1}\r\n        pageRangeDisplayed={5}\r\n        onPageChange={handlePageClick}\r\n        containerClassName={\"pagination\"}\r\n        subContainerClassName={\"pages pagination\"}\r\n        activeClassName={\"active\"} />\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function Follow({ followType, toFollow, initialState, className, refresh }) {\r\n  const [followed, setFollowed] = useState(initialState);\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n  \r\n  useEffect(() => {\r\n\t  setFollowed(initialState)\r\n\t  \r\n  }, [initialState]);\r\n  \r\n  const followpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/follow\" + followType + \"/\";\r\n  const follow = (value) => {\r\n\t\r\n\tif (access_token == \"\") {\r\n\t  window.location = \"/login\";\r\n\t}\r\n\t  \r\n    const body = {\r\n      following: toFollow,\r\n      type: value,\r\n    }\r\n    fetch(followpoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      const { followState } = data;\r\n      refresh();\r\n      setFollowed(followState);\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {followed == 0 ? (\r\n        <button type=\"button\" className={className} onClick={(e) => follow(1)}>Follow</button>\r\n      ) : (\r\n          <button type=\"button\" className={className} onClick={(e) => follow(-1)}>Unfollow</button>\r\n        )}\r\n    </div>\r\n  );\r\n\r\n\r\n\r\n\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function Block({ toBlock, initialState, className, refresh }) {\r\n  const [blocked, setBlocked] = useState(initialState);\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n  \r\n  useEffect(() => {\r\n\t  setBlocked(initialState)\r\n\t  \r\n  }, [initialState]);\r\n  \r\n  const blockpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/blockuser/\";\r\n  const block = (value) => {\r\n\t  \r\n\tif (access_token == \"\") {\r\n\t  window.location = \"/login\";\r\n\t}  \r\n\t  \r\n    const body = {\r\n      user_blocked: toBlock,\r\n      type: value,\r\n    }\r\n    fetch(blockpoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      const { blockState } = data;\r\n      refresh();\r\n      setBlocked(blockState);\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {blocked == 0 ? (\r\n        <button type=\"button\" className={className} onClick={(e) => block(1)}>Block</button>\r\n      ) : (\r\n          <button type=\"button\" className={className} onClick={(e) => block(-1)}>Unblock</button>\r\n        )}\r\n    </div>\r\n  );\r\n\r\n\r\n\r\n\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport './profile.css';\r\n\r\n// import components\r\nimport NavBar from '../../Shared_Components/NavBar';\r\nimport Sidebar from '../../Shared_Components/Sidebar/Sidebar';\r\nimport Feed from \"../../Shared_Components/Feed/Feed\";\r\nimport Follow from \"../../Shared_Components/Follow/Follow\";\r\nimport Block from \"../../Shared_Components/Block/Block\";\r\n\r\nexport default function Profile() {\r\n  const { username: pageUsername } = useParams();\r\n  const [errorMessage, updateErrorMessage] = useState('');\r\n  const [userData, setUserData] = useState([]);\r\n  const [contentView, setContentView] = useState(0);\r\n  const [username, updateUsername] = useState(pageUsername);\r\n  const [refreshFlag, updateRefreshFlag] = useState(true);\r\n  // replace with API call to /secure to validate token\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n  // if (access_token == null) {\r\n  //   window.location = '/login';\r\n  // }\r\n\r\n  useEffect(() => {\r\n    if (!username && access_token !== \"\") {\r\n      fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + '/protected', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n      }).then(response => response.json()).then(data => {\r\n        // updateUsername(data.logged_in);\r\n        window.location.href = \"/profile/\" + data.logged_in;\r\n      }).catch(err => {\r\n        console.error(err);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      console.log(username);\r\n      fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + '/profile/' + username, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n      }).then(response => response.json()).then(data => {\r\n        //TODO- check what data.msg does\r\n        const errorMessage = data.error_message || data.msg;\r\n        if (data.error_message == \"User does not exist\") {\r\n          window.location = \"/404\";\r\n        }\r\n        if (data.error_message == \"Blocked from content\") {\r\n          window.location = \"/blocked\";\r\n        }\r\n        setUserData(data);\r\n      }).catch(err => {\r\n        console.error(err);\r\n      });\r\n    }\r\n\tif (!username && access_token == \"\") {\r\n\t  window.location = \"/login\";\r\n\t}\r\n  }, [username, refreshFlag]);\r\n\r\n  useEffect(() => {\r\n    // TODO - handle errors\r\n  }, [errorMessage]);\r\n\r\n  useEffect(() => {\r\n\r\n  }, [contentView])\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"profile-container\">\r\n        <Sidebar />\r\n        <UserInfo userData={userData} pageUsername={pageUsername} refresh={() => { updateRefreshFlag(!refreshFlag) }} />\r\n        <UserPosts pageUsername={pageUsername} setContentView={setContentView} contentView={contentView} access_token={access_token} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UserInfo({ userData, pageUsername, refresh }) {\r\n  const { user_bio, user_pic, follower_count, following_count, topic_count, first_name, last_name, date_joined, username, follow, block } = userData;\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-info\">\r\n        <ProfilePicture user_pic={user_pic} />\r\n        <h1 className=\"profile-name\">{first_name + \" \" + last_name}</h1>\r\n        <p className=\"profile-username\">{pageUsername}</p>\r\n        <h1 className=\"profile-bio-title\">Bio</h1>\r\n        <p className=\"profile-bio\">{user_bio}</p>\r\n        <h1 className=\"profile-about-title\">Joined</h1>\r\n        <p className=\"profile-about\">{date_joined}</p>\r\n        <EditProfileButton pageUsername={pageUsername} username={username} follow={follow} block={block} refresh={() => refresh()} />\r\n        <p className=\"profile-followers\">{follower_count} Followers</p>\r\n        <p className=\"profile-following\">{following_count} Following</p>\r\n        <p className=\"profile-following\">{topic_count} Topics Following</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EditProfileButton({ pageUsername, username, follow, block, refresh }) {\r\n  const canUserEditProfile = (username === pageUsername);\r\n  if (canUserEditProfile) {\r\n    return <button onClick={() => window.location.href = '/editprofile'} type=\"button\" className=\"profile-follow-button\">Edit Profile</button>;\r\n  }\r\n  return ProfileActionButtons({\r\n    pageUsername,\r\n    follow,\r\n    refresh,\r\n    block\r\n  });\r\n}\r\n\r\nfunction ProfileActionButtons({ pageUsername, follow, refresh, block }) {\r\n  return (\r\n    <div>\r\n      <Follow className=\"profile-follow-button\" followType=\"user\" toFollow={pageUsername} initialState={follow} refresh={() => { refresh() }} />\r\n      <Block className=\"profile-follow-button\" toBlock={pageUsername} initialState={block} refresh={() => { refresh() }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ProfilePicture({ user_pic }) {\r\n  return user_pic == null ? (\r\n    <img src=\"/img/weave-icon.svg\" className=\"profile-icon\" alt=\"\" />\r\n  ) : (\r\n      <img src={user_pic} className=\"profile-icon\" alt=\"\" />\r\n    );\r\n}\r\n\r\nfunction UserPosts({ pageUsername, setContentView, contentView, access_token }) {\r\n\r\n  const [route, setRoute] = useState(\"userposts/\")\r\n  const [element, setElem] = useState(\"post\")\r\n\r\n  useEffect(() => {\r\n\t\r\n    if (contentView == 1) {\r\n\t  \r\n\t  if (access_token == \"\") {\r\n\t    window.location = \"/login\"\r\n\t  }\r\n\t\r\n      setRoute(\"usercomments/\")\r\n      setElem(\"comment\")\r\n    }\r\n    else {\r\n      setRoute(\"userposts/\")\r\n      setElem(\"post\")\r\n    }\r\n  }, [contentView])\r\n\r\n  return (\r\n    <div className=\"profile-choice\">\r\n      <div className=\"profile-buttons\">\r\n        <button type=\"button\" className=\"profile-posts-button\" onClick={(e) => setContentView(0)}>Posts</button>\r\n        <button type=\"button\" className=\"profile-interactions-button\" onClick={(e) => setContentView(1)}>Interactions</button>\r\n      </div>\r\n      <div className=\"profile-display\">\r\n        {/*{contentView === 0 ? (\r\n          <Feed route=\"userposts/\" username={pageUsername} />\r\n        ) : (\r\n            <Feed route=\"usercomments/\" username={pageUsername} elementType=\"comment\" />\r\n        )}*/}\r\n        <Feed route={route} username={pageUsername} elementType={element} />\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport { Navbar, Nav, Form } from 'react-bootstrap';\r\nimport ImageUploader from 'react-images-upload';\r\nimport \"./editprofile.css\";\r\n\r\n//module.exports(isFormValid);\r\n//module.exports(Login);\r\n\r\nexport default function EditProfile() {\r\n  const [firstName, updateFirstName] = useState(\"\");\r\n  const [lastName, updateLastName] = useState(\"\");\r\n  const [bio, updateBio] = useState(\"\");\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [successMessage, updateSuccessMessage] = useState(\"\");\r\n  const [image, saveImage] = useState(null);\r\n  const [access_token, updateToken] = useState(localStorage.getItem('access_token'));\r\n  window.onload = isLoggedIn(access_token);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (isFormValid({ firstName, lastName, bio, access_token })) {\r\n      const body = {\r\n        firstname: firstName,\r\n        lastname: lastName,\r\n        biocontent: bio,\r\n      }\r\n      /*\r\n       * post to backend\r\n       */\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/editprofile/\";\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        // if (data.msg) {\r\n        //   window.location = \"/login\"\r\n        // }\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n        } else {\r\n          const { access_token, refresh_token } = data;\r\n          updateSuccessMessage(\"Profile updated!\");\r\n\t\t      localStorage.setItem('access_token', access_token);\r\n          localStorage.setItem('refresh_token', refresh_token);\r\n\t\t      updateToken(localStorage.getItem('access_token'));\r\n        }\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n\r\n\t}\r\n\t\r\n\tif (image !== null && image.length > 0) {\r\n\t  const formData = new FormData();\r\n\t  const lastImg = image[image.length - 1];\r\n\t  formData.append('image', lastImg, lastImg.name);\r\n\t  fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/editprofilepic/\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t  'Authorization': 'Bearer ' + access_token\r\n\t\t},\r\n\t\tbody: formData\r\n\t  }).then(response => response.json()).then(data => {\r\n\t\tconsole.log(data);\r\n\t  });\r\n\t}\r\n  }\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n  const succObject = successMessage !== \"\" ? <SuccessBubble message={successMessage} /> : null;\r\n\r\n  return (\r\n    <div>\r\n      {/* Bootstrap Stylesheet */}\r\n      <link\r\n        rel=\"stylesheet\"\r\n        href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\"\r\n        integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\"\r\n        crossorigin=\"anonymous\"\r\n      />\r\n      <Navbar expand=\"lg\" bg=\"dark\" variant=\"dark\" sticky=\"top\">\r\n        <Navbar.Brand href=\"/login\">\r\n          <img src=\"/img/weave-icon.svg\" width=\"50\" height=\"50\"\r\n            className=\"d-inline-block align-top\" alt=\"\" />\r\n        </Navbar.Brand>\r\n        <Nav className=\"mr-auto\">\r\n          <Nav.Link>Messages</Nav.Link>\r\n          <Nav.Link>Notifications</Nav.Link>\r\n          <Nav.Link>Help</Nav.Link>\r\n        </Nav>\r\n      </Navbar>\r\n      <h1 className=\"edit-page-title\">Update Your Information</h1>\r\n      <div className=\"edit-container\">\r\n        <img src=\"./img/weave-icon.svg\" className=\"login-icon\" alt=\"\" />\r\n        <form className=\"edit-form\">\r\n\r\n          <label className=\"edit-form-label\">First Name</label>\r\n          <input\r\n            value={firstName}\r\n            onChange={e => {\r\n              updateFirstName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n              updateSuccessMessage(\"\");\r\n            }}\r\n            className=\"edit-form-input\"\r\n          />\r\n          <label className=\"edit-form-label\">Last Name</label>\r\n          <input\r\n            value={lastName}\r\n            onChange={e => {\r\n              updateLastName(e.target.value);\r\n              updateErrorMessage(\"\");\r\n              updateSuccessMessage(\"\");\r\n            }}\r\n            className=\"edit-form-input\"\r\n          />\r\n\r\n          <label className=\"edit-form-label\">Bio</label>\r\n          <textarea\r\n            value={bio}\r\n            onChange={e => {\r\n              updateBio(e.target.value);\r\n              updateErrorMessage(\"\");\r\n              updateSuccessMessage(\"\");\r\n            }}\r\n            className=\"bio-form-input\"\r\n          />\r\n\r\n          <label className=\"edit-form-label\">Profile Picture</label>\r\n          <ImageUploader\r\n            withIcon={true}\r\n            imgExtension={['.jpg', 'jpeg', '.gif', '.png', '.gif']}\r\n            maxFileSize={10000000}\r\n            buttonText='Select your profile picture.'\r\n            className=\"profile-pic-upload\"\r\n            onChange={saveImage}\r\n          />\r\n\r\n\r\n          <button type=\"submit\" className=\"edit-update-btn\" onClick={(e) => onSubmit(e)}>Update</button>\r\n\r\n        </form>\r\n        {errObject}\r\n        {succObject}\r\n        <a href=\"javascript:history.back()\" className=\"edit-link\">go back</a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction isFormValid({ firstName, lastName, bio, access_token }) {\r\n  if (!access_token) {\r\n    alert(\"Invalid access token\");\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"edit-error-bubble\">\r\n      <p className=\"edit-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SuccessBubble({ message }) {\r\n\treturn (\r\n\t\t<div className=\"edit-success-bubble\">\r\n\t\t\t<p className=\"edit-error-message\">{message}</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction isLoggedIn(access_token) {\r\n\tif (access_token == null) {\r\n\t\twindow.location = \"/login\"\r\n\t}\r\n}","import React, { useState } from \"react\";\r\nimport \"./notfound.css\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n\t  <div className=\"error-box\">\r\n\t\t<img className=\"error-image\" src=\"./img/weave-icon.svg\"></img>\r\n\t\t<h2 className=\"error-code\">404: Page Not Found</h2>\r\n\t\t<p className=\"error-message\">Looks like you got tangled up, this page doesn't exist!</p>\r\n\t  </div>\r\n  )\r\n}","import React, { useState } from \"react\";\r\nimport \"./notfound.css\";\r\n\r\nexport default function Blocked() {\r\n  return (\r\n\t  <div className=\"error-box\">\r\n\t\t<img className=\"error-image\" src=\"./img/weave-icon.svg\"></img>\r\n\t\t<h2 className=\"error-code\">Blocked: Page Not Accessible</h2>\r\n\t\t<p className=\"error-message\">A user has blocked you from viewing this content.</p>\r\n\t  </div>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem } from 'react-bootstrap';\r\nimport ImageUploader from 'react-images-upload';\r\n\r\nimport \"./createpost.css\";\r\n\r\nexport default function Timeline() {\r\n\tconst [postContent, updatePostContent] = useState(\"\");\r\n\tconst [postTitle, updatePostTitle] = useState(\"\");\r\n\tconst [postTopic, updatePostTopic] = useState(\"\");\r\n\tconst [isAnon, updateIsAnon] = useState(0);\r\n\tconst [image, saveImage] = useState(null);\r\n\tconst [errorMessage, updateErrorMessage] = useState(\"\");\r\n\tconst [successMessage, updateSuccessMessage] = useState(\"\");\r\n\t\r\n\tconst access_token = localStorage.getItem('access_token');\r\n\twindow.onload = isLoggedIn(access_token);\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/protected\", {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t}\r\n\t\t}).then(response => response.json()).then(data => {\r\n\t\t\tif (!data.logged_in) {\r\n\t\t\t\t// window.location.href=\"/login\";\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\talert(\"Err in console\");\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst onSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\t/* More to be added for posts eventually */\r\n\t\tif (isFormValid({ postTitle, postContent, postTopic, updateErrorMessage, updateSuccessMessage, image })) {\r\n\t\t\tconst body = {\r\n\t\t\t\ttitle: postTitle,\r\n\t\t\t\tcontent: postContent,\r\n\t\t\t\tanon: isAnon,\r\n\t\t\t\ttopic: postTopic\r\n\t\t\t}\r\n\t\t\tconst endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/createpost/\";\r\n\t\t\tfetch(endpoint, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(body)\r\n\t\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t\tif (data.error_message) {\r\n\t\t\t\t\tupdateErrorMessage(data.error_message);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t//TO-DO: make sure this is being sent on the right post\r\n\t\t\t\t\tconsole.log(image);\r\n\t\t\t\t\tif (image !== null && image.length > 0) {\r\n\t\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\t\tconst lastImg = image[image.length - 1];\r\n\t\t\t\t\t\tformData.append('image', lastImg, lastImg.name);\r\n\t\t\t\t\t\tfetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/createimage/\", {\r\n\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tbody: formData,\r\n\t\t\t\t\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdateSuccessMessage(\"Post Created!\")\r\n\t\t\t\t}\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\talert(err);\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tconst errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n\tconst successObject = successMessage != \"\" ? <SuccessBubble message={successMessage} /> : null;\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div>\r\n\t\t\t\t{/* Bootstrap Stylesheet */}\r\n\t\t\t\t<link\r\n\t\t\t\t\trel=\"stylesheet\"\r\n\t\t\t\t\thref=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\"\r\n\t\t\t\t\tintegrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\"\r\n\t\t\t\t\tcrossorigin=\"anonymous\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Navbar expand=\"lg\" bg=\"dark\" variant=\"dark\" sticky=\"top\">\r\n\t\t\t\t\t<Navbar.Brand href=\"/login\">\r\n\t\t\t\t\t\t<img src=\"/img/weave-icon.svg\" width=\"50\" height=\"50\"\r\n\t\t\t\t\t\t\tclassName=\"d-inline-block align-top\" alt=\"\" />\r\n\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t<Nav.Link>Messages</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link>Notifications</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link>Help</Nav.Link>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Navbar>\r\n\t\t\t</div>\r\n\t\t\t<h1 className=\"post-header\">Create a post</h1>\r\n\t\t\t<div className=\"post-container\">\r\n\t\t\t\t<form className=\"post-form\">\r\n\r\n\t\t\t\t\t<label className=\"post-form-label\">Post Title</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={postTitle}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tupdatePostTitle(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"post-form-input-title\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label className=\"post-form-label\">Post Topic</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={postTopic}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tupdatePostTopic(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"post-form-input-title\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label className=\"post-form-label\">Post Text</label>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tvalue={postContent}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tupdatePostContent(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"post-form-input-body\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label className=\"post-form-label\">Post Picture</label>\r\n\t\t\t\t\t<ImageUploader\r\n\t\t\t\t\t\twithIcon={true}\r\n\t\t\t\t\t\timgExtension={['.jpg', 'jpeg', '.gif', '.png', '.gif']}\r\n\t\t\t\t\t\tmaxFileSize={10000000}\r\n\t\t\t\t\t\tbuttonText='Add a picture to your post.'\r\n\t\t\t\t\t\tclassName=\"post-pic-upload\"\r\n\t\t\t\t\t\tonChange={saveImage}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tid=\"anon\"\r\n\t\t\t\t\t\tclassName=\"post-check-box\"\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tif (isAnon == 0){\r\n\t\t\t\t\t\t\t\tupdateIsAnon(1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tupdateIsAnon(0);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"post-check-label\">Make this post anonymously</label>\r\n\r\n\t\t\t\t\t<button type=\"submit\" className=\"post-submit-btn\" onClick={(e) => onSubmit(e)}>Create Post</button>\r\n\t\t\t\t\t{errObject}\r\n\t\t\t\t\t{successObject}\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t<a href=\"javascript:history.back()\" className=\"return-link\">go back</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction isFormValid({ postTitle, postContent, postTopic, updateErrorMessage, updateSuccessMessage, image }) {\r\n\tupdateSuccessMessage(\"\")\r\n\tupdateErrorMessage(\"\")\r\n\tif (postTitle === \"\") {\r\n\t\tupdateErrorMessage(\"Please enter a title for your post.\");\r\n\t} else if (postContent === \"\") {\r\n\t\tupdateErrorMessage(\"Post body cannot be empty.\");\r\n\t} else if (postContent.length > 750 && image === null) {\r\n\t\tupdateErrorMessage(\"Post body cannot exceed 750 characters\");\r\n\t} else if (postContent.length > 100 && image !== null) {\r\n\t\tupdateErrorMessage(\"Captions cannot exceed 100 characters\");\r\n\t} else if (postTitle.length > 100) {\r\n\t\tupdateErrorMessage(\"Post title cannot exceed 100 characters\");\r\n\t} else if (postTopic.length > 20) {\r\n\t\tupdateErrorMessage(\"Post topic cannot exceed 20 characters\");\r\n\t} else {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n\treturn (\r\n\t\t<div className=\"post-error-bubble\">\r\n\t\t\t<p className=\"post-error-message\">{message}</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction SuccessBubble({ message }) {\r\n\treturn (\r\n\t\t<div className=\"success-error-bubble\">\r\n\t\t\t<p className=\"post-error-message\">{message}</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction isLoggedIn(access_token) {\r\n\tif (access_token == null) {\r\n\t\twindow.location = \"/login\"\r\n\t}\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport NavBar from \"../../Shared_Components/NavBar\";\r\nimport Sidebar from '../../Shared_Components/Sidebar/Sidebar';\r\nimport Feed from \"../../Shared_Components/Feed/Feed\";\r\n\r\nimport './savedposts.css';\r\n\r\nexport default function SavedPosts() {\r\n  \r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    window.location = \"/login\";\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n\t\t  <div className=\"saved-posts-content\">\r\n\t\t\t  <Sidebar />\r\n        <div className=\"saved-posts-container\">\r\n          <h1 className=\"saved-posts-heading\">Your saved posts:</h1>\r\n\t\t\t    <Feed route=\"savedposts/\" />\r\n          <a href=\"javascript:history.back()\" className=\"saved-posts-return\">go back</a>\r\n        </div>\r\n\t\t  </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"./commentcreator.css\";\r\n\r\nexport default function CommentCreator({\r\n  postId,\r\n  reload\r\n}) {\r\n  const [commentContent, updateCommentContent] = useState(\"\");\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [successMessage, updateSuccessMessage] = useState(\"\");\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n  const successObject = successMessage != \"\" ? <SuccessBubble message={successMessage} /> : null;\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    access_token = \"\";\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/protected\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      }\r\n    }).then(response => response.json()).then(data => {\r\n      if (!data.logged_in) {\r\n        // window.location.href = \"/login\";\r\n      }\r\n    }).catch(err => {\r\n      alert(\"Err in console\");\r\n      console.error(err);\r\n    });\r\n  }, []);\r\n\r\n  const commentpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/createcomment/\"\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    const body = {\r\n      content: commentContent,\r\n      post_id: postId,\r\n    }\r\n    fetch(commentpoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message) {\r\n        updateErrorMessage(data.error_message);\r\n      } else {\r\n        updateSuccessMessage(\"comment added!\");\r\n      }\r\n      reload();\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n    }).catch(err => {\r\n      console.error(err);\r\n      alert(err);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"comment-header\">Comment:</h1>\r\n      <div className=\"comment-container\">\r\n        <form className=\"comment-form\">\r\n\r\n          <label className=\"comment-form-label\">Comment Text</label>\r\n          <textarea\r\n            value={commentContent}\r\n            onChange={e => {\r\n              updateCommentContent(e.target.value);\r\n              updateSuccessMessage(\"\");\r\n              updateErrorMessage(\"\");\r\n            }}\r\n            className=\"comment-form-input-body\"\r\n          />\r\n\r\n          <button type=\"submit\" className=\"comment-submit-btn\" onClick={(e) => onSubmit(e)}>Add Comment</button>\r\n          {errObject}\r\n          {successObject}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"comment-error-bubble\">\r\n      <p className=\"comment-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SuccessBubble({ message }) {\r\n  return (\r\n    <div className=\"comment-success-bubble\">\r\n      <p className=\"comment-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport \"./postpage.css\";\r\n\r\n// import components\r\nimport NavBar from '../../../Shared_Components/NavBar';\r\nimport Sidebar from '../../../Shared_Components/Sidebar/Sidebar';\r\nimport Post from '../../../Shared_Components/Post/Post';\r\nimport Feed from \"../../../Shared_Components/Feed/Feed\";\r\nimport CommentCreator from '../CommentCreator/CommentCreator';\r\nimport { Nav, Navbar } from \"react-bootstrap\";\r\n\r\nexport default function Profile() {\r\n  const { post_id: pagePost } = useParams();\r\n\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const [postdata, setPostData] = useState([]);\r\n  const [commentsData, setCommentsData] = useState([]);\r\n  {/* keeps track if user has saved or voted */ }\r\n  const [saveCheck, setSaved] = useState(0);\r\n  const [voteCheck, setVoted] = useState(0);\r\n  const [reloadFlag, updateReloadFlag] = useState(0);\r\n\r\n  const reload = () => {\r\n    updateReloadFlag(!reloadFlag);\r\n  }\r\n\r\n  {/* current score of post */ }\r\n  const [votes, setVotes] = useState(0);\r\n\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/post/\" + pagePost;\r\n  const votepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/vote/\"\r\n  const savepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/save/\"\r\n  const statepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/poststates/\"\r\n  const commentpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/postcomments/\"\r\n\r\n  {/* renders the post with fetch data and the states of the save and voting buttons */ }\r\n  useEffect(() => {\r\n    fetch(endpoint, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message == \"User does not exist\") {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n\t  if (data.error_message == \"Blocked from content\"){\r\n\t    window.location = \"/blocked\";\r\n\t  }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      setPostData(data);\r\n      const { score } = data;\r\n      setVotes(score);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n\r\n    const body = {\r\n      post_id: pagePost,\r\n    }\r\n\r\n    fetch(statepoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message == \"User does not exist\") {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      /* setStateData(data); */\r\n      const { saved, voted } = data;\r\n      setSaved(saved);\r\n      setVoted(voted);\r\n    }).catch(err => {\r\n      console.error(err);\r\n      alert(err);\r\n\r\n    });\r\n  }, [reloadFlag])\r\n\r\n  const { topic_name, date_created, post_type, pic_path, title, content, creator } = postdata;\r\n\r\n  {/* sends the votes to the server and receives the change in score */ }\r\n  const vote = (value) => {\r\n    setVoted(value);\r\n    const body = {\r\n      type: '1',\r\n      id: pagePost,\r\n      vote: value,\r\n    }\r\n    fetch(votepoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message == \"User does not exist\") {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      // if (data.msg) {\r\n      //   window.location = \"/login\"\r\n      // }\r\n      const { change } = data;\r\n      setVotes(votes + change);\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n  };\r\n\r\n  {/* sends the saved/unsaved postId to the server */ }\r\n  const savePost = (value) => {\r\n    setSaved(value);\r\n    const body = {\r\n      post: pagePost,\r\n      type: value,\r\n    }\r\n    fetch(savepoint, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + access_token\r\n      },\r\n      body: JSON.stringify(body)\r\n    }).then(response => response.json()).then(data => {\r\n      if (data.error_message == \"User does not exist\") {\r\n        updateErrorMessage(data.error_message);\r\n        window.location = \"/404\"\r\n      }\r\n      /* catches jwt errors that don't use the form \"error_message:\" */\r\n      if (data.msg) {\r\n        window.location = \"/login\"\r\n      }\r\n    }).catch(err => {\r\n      console.error(err);\r\n\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"post-page-content\">\r\n        <Sidebar className=\"post-sidebar\" />\r\n        <div className=\"not-post-sidebar\">\r\n          <div className=\"post-wrapper\">\r\n            <Post postId={pagePost} redesign={true} />\r\n          </div>\r\n          <div className=\"comment-wrapper\">\r\n            <CommentCreator postId={pagePost} reload={reload} />\r\n          </div>\r\n          <p className=\"comment-heading\">Comments:</p>\r\n          <div className=\"comments-container\" >\r\n            <Feed route=\"postcomments/\" post_id={pagePost} elementType=\"comment\" reloadFlag={reloadFlag} />\r\n          </div>\r\n          <a href=\"javascript:history.back()\" className=\"topic-return\">go back</a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* <div className=\"post-page-container\">\r\n        <div className=\"post-wrapper\">\r\n          <Post postId={pagePost} redesign={true} />\r\n        </div>\r\n      </div>\r\n      <CommentCreator postId={pagePost} />\r\n      <p className=\"comment-heading\">Comments:</p>\r\n      <div className=\"comments-container\" >\r\n        <Feed route=\"postcomments/\" post_id={pagePost} elementType=\"comment\" />\r\n      </div>\r\n      <a href=\"javascript:history.back()\" className=\"topic-return\">go back</a> */}\r\n    </div>\r\n\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport NavBar from \"../../../Shared_Components/NavBar\";\r\nimport Sidebar from '../../../Shared_Components/Sidebar/Sidebar';\r\nimport Post from \"../../../Shared_Components/Post/Post\";\r\nimport Feed from \"../../../Shared_Components/Feed/Feed\";\r\nimport Follow from \"../../../Shared_Components/Follow/Follow\";\r\n\r\nimport './topicpage.css';\r\n\r\nexport default function TopicPosts() {\r\n  const {topic_name: topic } = useParams();\r\n  const [postData, setPostData] = useState([]);\r\n  const [topicData, setTopicData] = useState([]);\r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    window.location = \"/login\";\r\n  }\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch((process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + '/topic/' + topic, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t},\r\n\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t//TODO- check what data.msg does\r\n\t\t\tconst errorMessage = data.error_message || data.msg;\r\n\t\t\tsetTopicData(data);\r\n\t\t}).catch(err => {\r\n\t\t  console.error(err);\r\n\t\t});\r\n  }, []);\r\n\r\n\r\n  const { follower_count, topic_name, follow } = topicData;\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"topic-container\">\r\n\t\t  <Sidebar />\r\n        {/* List of posts */}\r\n        <div className=\"topic-display\">\r\n\t\t      <h1 className=\"topic-heading\">Welcome to the <b>{topic}</b> topic:</h1>\r\n\t\t      <p className=\"topic-followers\">Topic Followers: {follower_count}</p>\r\n\t\t      <Follow className=\"topic-follow-button\" followType=\"topic\" toFollow={topic} initialState={follow}/>\r\n          <Feed route=\"topicposts/\" topic={topic} />\r\n\t\t      <a href=\"javascript:history.back()\" className=\"topic-return\">go back</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport NavBar from \"../../../Shared_Components/NavBar\";\r\nimport Sidebar from '../../../Shared_Components/Sidebar/Sidebar';\r\nimport Post from \"./../../../Shared_Components/Post/Post\";\r\nimport Feed from \"../../../Shared_Components/Feed/Feed\";\r\nimport './timeline.css';\r\n\r\nexport default function TimelinePosts() {\r\n  \r\n  let access_token = localStorage.getItem('access_token');\r\n  if (!access_token) {\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"timeline-container\">\r\n        {/* List of posts */}\r\n\t\t    <Sidebar />\r\n        <div className=\"timeline-display\">\r\n\t\t      <h1 className=\"timeline-heading\">Your timeline:</h1>\r\n          <Feed route=\"timeline\"/>\r\n\t\t      <a href=\"javascript:history.back()\" className=\"timeline-return\">go back</a>\r\n        </div>        \r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport NavBar from '../../Shared_Components/NavBar';\r\nimport Sidebar from '../../Shared_Components/Sidebar/Sidebar';\r\nimport './settings.css';\r\n\r\nexport default function Settings(){\r\n\r\n\tconst [currPass, updateCurrPass] = useState(\"\");\r\n\tconst [newPass, updateNewPass] = useState(\"\");\r\n\tconst [newUser, updateNewUser] = useState(\"\");\r\n\tconst [newEmail, updateNewEmail] = useState(\"\");\r\n\tconst [deleteErrorMessage, updateDeleteErrorMessage] = useState(\"\");\r\n\tconst [normalErrorMessage, updateNormalErrorMessage] = useState(\"\");\r\n\tconst [successMessage, updateSuccessMessage] = useState(\"\");\r\n\tconst [access_token, updateToken] = useState(localStorage.getItem('access_token'));\r\n\tif (access_token == null) {\r\n\t\twindow.location = '/login';\r\n\t}\r\n\r\n\t// Delete Account Function\r\n\tconst DeleteAccount = (event) => {\r\n\t\t\r\n\t\tevent.preventDefault();\r\n\t\tconst JSONbody = {\r\n\t\t\tpassword: currPass,\r\n\t\t}\r\n\r\n\t\tconst deletepoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/deleteaccount/\";\r\n\t\tfetch(deletepoint, {\r\n      \t\tmethod: 'POST',\r\n      \t\theaders: {\r\n        \t\t'Content-Type': 'application/json',\r\n        \t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t  },\r\n\t\t\t  body: JSON.stringify(JSONbody)\r\n    \t}).then(response => response.json()).then(data => {\r\n\t\t\t\r\n\t\t\t// Catches errors\r\n\t\t\tconst errorMessage = data.error_message || data.msg;\r\n      \t\tif (errorMessage) {\r\n\t\t\t\tupdateDeleteErrorMessage(data.error_message);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t\r\n\t\t\t\t// Blacklists the current JWT tokens; mirrors logout.\r\n\t\t\t\tconst access_token = localStorage.getItem('access_token');\r\n\t\t\t\tconst logoutEndpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/logout\";\r\n\t\t\t\tfetch(logoutEndpoint, {\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t\t},\r\n\t\t\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t\tconst { refresh_token } = data;\r\n\t\t\t\tconst endpoint2 = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/logout2\";\r\n\t\t\t\tfetch(endpoint2, {\r\n\t\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Authorization': 'Bearer ' + refresh_token\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t\t\tlocalStorage.clear(\"access_token\");\r\n\t\t\t\t\tlocalStorage.clear(\"refresh_token\");\r\n\t\t\t\t\t// window.location = \"/login\";\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\talert(\"error: check console for details\");\r\n\t\t\t\t});\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\talert(\"error: check console for details\");\r\n\t\t\t\t});\r\n\t\t\t\t// End JWT Blacklist\r\n\t\t\t\r\n\t\t\t}  \r\n\r\n    \t}).catch(err => {\r\n      \t\tconsole.error(err);\r\n    \t});\r\n\t}\r\n\t// End Delete Account\r\n\r\n\t// Update settings Function\r\n\tconst UpdateSettings = (event) => {\r\n\t\t\r\n\t\tevent.preventDefault();\r\n\t\tconst JSONbody = {\r\n\t\t\tcurrentpass: currPass,\r\n\t\t\tnewemail: newEmail,\r\n\t\t\tnewpass: newPass,\r\n\t\t\tnewusername: newUser,\r\n\t\t\tprivacy: 0,\r\n\t\t}\r\n\r\n\t\tconst endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/editsettings/\";\r\n\t\tfetch(endpoint, {\r\n      \t\tmethod: 'POST',\r\n      \t\theaders: {\r\n        \t\t'Content-Type': 'application/json',\r\n        \t\t'Authorization': 'Bearer ' + access_token\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(JSONbody)\r\n\t\t}).then(response => response.json()).then(data => {\r\n\t\t\t\r\n\t\t\t// Catches errors\r\n\t\t\tconst errorMessage = data.error_message || data.msg;\r\n\t\t\tif (errorMessage) {\r\n\t\t\t\tupdateNormalErrorMessage(data.error_message);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst { access_token, refresh_token } = data;\r\n\t\t\t\tlocalStorage.setItem('access_token', access_token);\r\n\t\t\t\tlocalStorage.setItem('refresh_token', refresh_token);\r\n\t\t\t\tupdateToken(localStorage.getItem('access_token'));\r\n\t\t\t\tupdateSuccessMessage(\"Settings updated!\");\r\n\t\t\t}\r\n\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\t\t// End Update Settings Function\r\n\t}\r\n\r\n\tconst deleteErrObject = deleteErrorMessage !== \"\" ? <ErrorBubble message={deleteErrorMessage} /> : null;\r\n\tconst normalErrObject = normalErrorMessage !== \"\" ? <ErrorBubble message={normalErrorMessage} /> : null;\r\n\tconst succObject = successMessage !== \"\" ? <SuccessBubble message={successMessage} /> : null;\r\n\r\n\treturn (\r\n\t    <div>\r\n\t\t<NavBar />\r\n\t\t\t<div className=\"settings-container\">\r\n\t\t\t\t<Sidebar />\t\r\n\t\t\t\t<div className=\"settings-display\">\r\n\t\t\t\t\t<h1 className=\"settings-heading\">Modify your settings</h1>\r\n\t\t\t\t\t<div className=\"settings-form-box\">\r\n\t\t\t\t\t\t<form className=\"settings-form\">\r\n\r\n\t\t\t\t\t\t\t<label className=\"settings-label\">Enter your current password:</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tvalue={currPass}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tupdateCurrPass(e.target.value);\r\n\t\t\t\t\t\t\t\t\tupdateDeleteErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateNormalErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateSuccessMessage(\"\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tclassName=\"settings-input\" \r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<hr className=\"settings-divider\"/>\r\n\r\n\t\t\t\t\t\t\t<label className=\"settings-label\">Enter a new password:</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tvalue={newPass}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tupdateNewPass(e.target.value);\r\n\t\t\t\t\t\t\t\t\tupdateDeleteErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateNormalErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateSuccessMessage(\"\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tclassName=\"settings-input\" \r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<label className=\"settings-label\">Enter a new username:</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tvalue={newUser}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tupdateNewUser(e.target.value);\r\n\t\t\t\t\t\t\t\t\tupdateDeleteErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateNormalErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateSuccessMessage(\"\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"settings-input\" \r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<label className=\"settings-label\">Enter a new email:</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tvalue={newEmail}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tupdateNewEmail(e.target.value);\r\n\t\t\t\t\t\t\t\t\tupdateDeleteErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateNormalErrorMessage(\"\");\r\n\t\t\t\t\t\t\t\t\tupdateSuccessMessage(\"\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"settings-input\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<hr className=\"settings-divider-special\"/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<a className=\"settings-link\" href=\"/blockedusers\" >Blocked Users</a> <br />\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<hr className=\"settings-divider-special\"/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tclassName=\"settings-checkbox\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label className=\"settings-label-header\">Activate privacy mode</label>\r\n\t\t\t\t\t\t\t<label className=\"settings-label\">When privacy mode is activated, you will not receieve direct messages from anyone but the users you have followed.</label>\r\n\r\n\r\n\t\t\t\t\t\t\t<button className=\"settings-button\" onClick={(e) => UpdateSettings(e)}>Update Settings</button>\r\n\t\t\t\t\t\t\t{normalErrObject}\r\n\t\t\t\t\t\t\t{succObject}\r\n\r\n\t\t\t\t\t\t\t<hr className=\"settings-divider\"/>\r\n\r\n\t\t\t\t\t\t\t<label className=\"delete-label\">If you are ready to end your time here on Weave, enter your password and then click the button below. THIS ACTION CANNOT BE UNDONE.</label>\r\n\r\n\t\t\t\t\t\t\t<button className=\"delete-button\" onClick={(e) => DeleteAccount(e)}>Delete My Account</button>\r\n\t\t\t\t\t\t\t{deleteErrObject}\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n} \r\n\r\nfunction ErrorBubble({ message }) {\r\n\treturn (\r\n\t  <div className=\"edit-error-bubble\">\r\n\t\t<p className=\"edit-error-message\">{message}</p>\r\n\t  </div>\r\n\t)\r\n}\r\n\r\nfunction SuccessBubble({ message }) {\r\n\treturn (\r\n\t\t<div className=\"edit-success-bubble\">\r\n\t\t\t<p className=\"edit-error-message\">{message}</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport NavBar from '../../Shared_Components/NavBar';\r\nimport Sidebar from '../../Shared_Components/Sidebar/Sidebar';\r\nimport Feed from \"../../Shared_Components/Feed/Feed\";\r\n\r\nexport default function MessagingPage(){\t\r\n\tconst [message, uploadChatMessage] = useState(\"\")\r\n  const [receiver, setReceiver] = useState(\"\")\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const access_token = localStorage.getItem('access_token');\r\n  if (access_token == null) {\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (isMessageValid({ message: message, receiver: receiver, updateErrorMessage })) {\r\n      const body = {\r\n        content: message,\r\n        receiver: receiver,\r\n      }\r\n      console.log(body)\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/createmessage/\";\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n        } else {\r\n\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n    }\r\n  }\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t  <NavBar />\r\n\t\t  <div className=\"chat-container\">\r\n\t\t\t<Sidebar />\r\n\t\t\t<div className=\"chat-content\">\r\n\t\t\t  <Feed route=\"allmessages/\" elementType=\"messages\"/>\r\n\t\t\t  <form className=\"chat-form\">\r\n\t\t\t\t<label className=\"chat-form-label\">Message</label>\r\n\t\t\t\t<input\r\n\t\t\t\t  value={message}\r\n\t\t\t\t  onChange={e => {\r\n\t\t\t\t\tuploadChatMessage(e.target.value);\r\n\t\t\t\t\tupdateErrorMessage(\"\");\r\n\t\t\t\t  }} className=\"chat-form-input\"\r\n\t\t\t\t/>\r\n\t\t\t\t<label className=\"chat-form-label\">Receiver</label>\r\n\t\t\t\t<input\r\n\t\t\t\t  value={receiver}\r\n\t\t\t\t  onChange={e => {\r\n\t\t\t\t\tsetReceiver(e.target.value);\r\n\t\t\t\t\tupdateErrorMessage(\"\");\r\n\t\t\t\t  }} className=\"chat-form-input\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button type=\"submit\" className=\"chat-submit-btn\" onClick={(e) => onSubmit(e)}>Send Message</button>\r\n\t\t\t  </form>\r\n\t\t\t  {errObject}\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t</div>\r\n\t  );\r\n\t}\r\n\t\r\n\tfunction isMessageValid({ message, receiver, updateErrorMessage }) {\r\n\t  if (message === \"\") {\r\n\t\tupdateErrorMessage(\"Please enter a message.\");\r\n\t  }\r\n\t  else if (receiver === \"\") {\r\n\t\tupdateErrorMessage(\"Please enter a receiver.\");\r\n\t  }\r\n\t  else {\r\n\t\treturn true;\r\n\t  }\r\n\t  return false;\r\n\t}\r\n\t\r\n\tfunction ErrorBubble({ message }) {\r\n\t  return (\r\n\t\t<div className=\"chat-error-bubble\">\r\n\t\t  <p className=\"chat-error-message\">{message}</p>\r\n\t\t</div>\r\n\t  )\r\n\t}\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport NavBar from '../../Shared_Components/NavBar';\r\nimport Sidebar from '../../Shared_Components/Sidebar/Sidebar';\r\nimport Feed from \"../../Shared_Components/Feed/Feed\";\r\n\r\nexport default function BlockedUsers(){\t\r\n\t\r\n\treturn (\r\n\t    <div>\r\n\t\t<NavBar />\r\n\t\t\t<div className=\"settings-container\">\r\n\t\t\t\t<Sidebar />\t\r\n\t\t\t\t<Feed route=\"blockedusers/\" elementType=\"profile\"/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Message from '../Chat/Message'\r\n\r\nimport \"./display.css\";\r\n\r\nexport default function ChatDisplay({sender}) {\r\n    const [messageContent, setMessageContent] = useState([]);\r\n    const [messageData, setMessageData] = useState([]);\r\n    const access_token = localStorage.getItem('access_token');\r\n    if (access_token == null) {\r\n      window.location = \"/login\"\r\n    }\r\n  \r\n    useEffect(() => {\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/allmessages/\"\r\n      //console.log(endpoint)\r\n      const body = {\r\n        start: 0,\r\n        end: 10\r\n      }\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        const { pull_list: message_ids, rowCount: rowCount } = data;\r\n        setMessageData(message_ids);\r\n      }).catch(err => {\r\n        console.log(err);\r\n      });\r\n    }, []);\r\n    \r\n    useEffect(() => {\r\n      let tester = [];\r\n      if (messageData) {\r\n        messageData.forEach((messageId) => {\r\n          console.log(messageId)\r\n          tester.push(<Message key={messageId} messageId={messageId} user1={sender}/>)\r\n        });\r\n        setMessageContent(tester);\r\n        if (messageContent.length === 0) {\r\n          tester = <p>No Posts!</p>;\r\n        }\r\n      }\r\n    }, [messageData])\r\n  \r\n    return (\r\n      <div className=\"messages-display\">\r\n        {messageContent}\r\n      </div>\r\n    );\r\n  }","import React, { useState } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport NavBar from \"../Shared_Components/NavBar\";\r\nimport Sidebar from '../Shared_Components/Sidebar/Sidebar';\r\nimport ChatDisplay from '../Chat/ChatDisplay'\r\n\r\nimport \"./chat.css\";\r\n\r\n//module.exports(isFormValid);\r\n//module.exports(Login);\r\n\r\nexport default function Chat() {\r\n  const { username: sender } = useParams();\r\n\r\n  const [message, uploadChatMessage] = useState(\"\")\r\n  const [receiver, setReceiver] = useState(\"\")\r\n  const [errorMessage, updateErrorMessage] = useState(\"\");\r\n  const access_token = localStorage.getItem('access_token');\r\n  if (access_token == null) {\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (isMessageValid({ message: message, receiver: receiver, updateErrorMessage })) {\r\n      const body = {\r\n        content: message,\r\n        receiver: receiver,\r\n      }\r\n      console.log(body)\r\n      const endpoint = (process.env.NODE_ENV === 'production' ? \"http://weave.projectcarbon.io/server\" : \"http://localhost:5000\") + \"/createmessage/\";\r\n      fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + access_token\r\n        },\r\n        body: JSON.stringify(body)\r\n      }).then(response => response.json()).then(data => {\r\n        if (data.error_message) {\r\n          updateErrorMessage(data.error_message);\r\n        } else {\r\n\r\n        }\r\n      }).catch(err => {\r\n        console.error(err);\r\n        alert(\"error: check console for details\");\r\n      });\r\n    }\r\n  }\r\n\r\n  const errObject = errorMessage !== \"\" ? <ErrorBubble message={errorMessage} /> : null;\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"chat-container\">\r\n        <Sidebar />\r\n        <div className=\"chat-content\">\r\n          <ChatDisplay sender={sender} />\r\n          <form className=\"chat-form\">\r\n            <label className=\"chat-form-label\">Message</label>\r\n            <input\r\n              value={message}\r\n              onChange={e => {\r\n                uploadChatMessage(e.target.value);\r\n                updateErrorMessage(\"\");\r\n              }} className=\"chat-form-input\"\r\n            />\r\n            <label className=\"chat-form-label\">Receiver</label>\r\n            <input\r\n              value={receiver}\r\n              onChange={e => {\r\n                setReceiver(e.target.value);\r\n                updateErrorMessage(\"\");\r\n              }} className=\"chat-form-input\"\r\n            />\r\n            <button type=\"submit\" className=\"chat-submit-btn\" onClick={(e) => onSubmit(e)}>Send Message</button>\r\n          </form>\r\n          {errObject}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction isMessageValid({ message, receiver, updateErrorMessage }) {\r\n  if (message === \"\") {\r\n    updateErrorMessage(\"Please enter a message.\");\r\n  }\r\n  else if (receiver === \"\") {\r\n    updateErrorMessage(\"Please enter a receiver.\");\r\n  }\r\n  else {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction ErrorBubble({ message }) {\r\n  return (\r\n    <div className=\"chat-error-bubble\">\r\n      <p className=\"chat-error-message\">{message}</p>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport ReactDOM from 'react-dom';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\nimport Login from \"./pages/auth/Login/Login\";\r\nimport Register from \"./pages/auth/Register/Register\";\r\nimport Profile from \"./user_info/Profile/Profile\";\r\nimport EditProfile from \"./user_info/Profile/EditProfile\";\r\nimport NotFound from \"./error_pages/NotFound\";\r\nimport Blocked from \"./error_pages/Blocked\";\r\nimport CreatePost from \"./pages/post_info/CreatePost/CreatePost\";\r\nimport SavedPosts from './user_info/SavedPosts/SavedPosts';\r\nimport PostPage from './pages/post_info/PostPage/PostPage';\r\nimport TopicPage from './pages/post_info/Topics/TopicPage';\r\nimport Timeline from './pages/post_info/Timeline/Timeline';\r\nimport Settings from \"./user_info/Settings/Settings\";\r\nimport Messages from \"./user_info/Messages/MessagingPage\";\r\nimport BlockedUsers from \"./user_info/BlockedUsers/BlockedUsers\";\r\nimport Chat from \"./Chat/Chat\"\r\n//import ForgotPassword from \"./auth/ForgotPassword/ForgotPassword\";\r\n// import PostPage from \"./pages/PostsPage/PostsPage\";\r\n\r\nfunction AppRouter() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Login />\r\n        </Route>\r\n        <Route path=\"/resetpassword\">\r\n          {/*<ForgotPassword />*/}\r\n        </Route>\r\n        <Route path=\"/savedposts\">\r\n          <SavedPosts />\r\n        </Route>\r\n        <Route path=\"/register\">\r\n          <Register />\r\n        </Route>\r\n        <Route path=\"/login\">\r\n          <Login />\r\n        </Route>\r\n        <Route path=\"/profile/:username\">\r\n          <Profile />\r\n        </Route>\r\n        <Route path=\"/profile\">\r\n          <Profile />\r\n        </Route>\r\n        <Route path=\"/editprofile\">\r\n          <EditProfile />\r\n        </Route>\r\n        <Route path=\"/chat/:username\">\r\n          <Chat />\r\n        </Route>\r\n\t\t<Route path=\"/settings\">\r\n\t\t  <Settings />\r\n\t\t</Route>\r\n        <Route path=\"/timeline\">\r\n          <Timeline />\r\n        </Route>\r\n        <Route path=\"/createpost\">\r\n          <CreatePost />\r\n        </Route>\r\n        <Route path=\"/post/:post_id\">\r\n          <PostPage />\r\n        </Route>\r\n        <Route path=\"/topic/:topic_name\">\r\n          <TopicPage />\r\n        </Route>\r\n\t\t<Route path=\"/blocked\">\r\n\t\t  <Blocked />\r\n\t\t</Route>\r\n\t\t<Route path=\"/blockedusers\">\r\n\t\t  <BlockedUsers />\r\n\t\t</Route>\r\n\t\t<Route path=\"/messages\">\r\n\t\t  <Messages />\r\n\t\t</Route>\r\n        <Route path=\"/\">\r\n          <NotFound />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <AppRouter />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}